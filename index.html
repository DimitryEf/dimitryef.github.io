<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Иерархия разделов сайта с поиском и внешними ссылками</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" type="image/png" href="favicon.png">
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        header {
            text-align: center;
            padding: 30px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border-left: 8px solid #3498db;
        }

        h1 {
            color: #2c3e50;
            font-size: 2.8rem;
            margin-bottom: 10px;
            background: linear-gradient(to right, #3498db, #2c3e50);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .subtitle {
            color: #7f8c8d;
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto 20px;
        }

        .search-container {
            max-width: 800px;
            margin: 25px auto;
            position: relative;
        }

        .search-box {
            width: 100%;
            padding: 18px 25px;
            padding-left: 60px;
            font-size: 1.1rem;
            border: 2px solid #e0e0e0;
            border-radius: 50px;
            outline: none;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .search-box:focus {
            border-color: #3498db;
            box-shadow: 0 5px 20px rgba(52, 152, 219, 0.2);
        }

        .search-icon {
            position: absolute;
            left: 25px;
            top: 50%;
            transform: translateY(-50%);
            color: #95a5a6;
            font-size: 1.3rem;
        }

        .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            margin-top: 10px;
            z-index: 1000;
            max-height: 400px;
            overflow-y: auto;
            display: none;
        }

        .search-result-item {
            padding: 15px 25px;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.2s ease;
        }

        .search-result-item:hover {
            background-color: #f8f9fa;
            padding-left: 30px;
        }

        .search-result-item .icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.1rem;
        }

        .search-result-item .info {
            flex: 1;
        }

        .search-result-item .title {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .search-result-item .path {
            color: #7f8c8d;
            font-size: 0.9rem;
        }

        .search-result-item .match-count {
            background: #e74c3c;
            color: white;
            padding: 3px 8px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .search-result-item.highlight {
            background-color: #e1f5fe;
            border-left: 4px solid #3498db;
        }

        .search-stats {
            padding: 15px 25px;
            color: #7f8c8d;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .no-results {
            padding: 30px;
            text-align: center;
            color: #95a5a6;
        }

        .no-results i {
            font-size: 3rem;
            margin-bottom: 15px;
            color: #bdc3c7;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 10px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 25px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 6px rgba(50, 50, 93, 0.11);
        }

        .btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 7px 14px rgba(50, 50, 93, 0.1);
        }

        .btn-expand-all {
            background: #2ecc71;
        }

        .btn-expand-all:hover {
            background: #27ae60;
        }

        .btn-collapse-all {
            background: #e74c3c;
        }

        .btn-collapse-all:hover {
            background: #c0392b;
        }

        .content-wrapper {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
        }

        .hierarchy-container {
            flex: 1;
            min-width: 300px;
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            height: fit-content;
        }

        .hierarchy-title {
            color: #2c3e50;
            font-size: 1.8rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #3498db;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .hierarchy-title i {
            color: #3498db;
        }

        .tree {
            list-style: none;
            padding-left: 0;
            max-height: 600px;
            overflow-y: auto;
            padding-right: 10px;
        }

        .tree::-webkit-scrollbar {
            width: 8px;
        }

        .tree::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }

        .tree::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 4px;
        }

        .tree::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }

        .tree,
        .tree ul {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .tree ul {
            margin-left: 25px;
            position: relative;
        }

        .tree ul:before {
            content: "";
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #e0e0e0;
        }

        .tree li {
            margin: 10px 0;
            position: relative;
            padding-left: 30px;
        }

        .tree li:before {
            content: "";
            position: absolute;
            left: 0;
            top: 50%;
            width: 20px;
            height: 2px;
            background: #e0e0e0;
        }

        .tree>li:first-child:before {
            display: none;
        }

        .tree-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            transition: all 0.2s ease;
            border-left: 4px solid #3498db;
            box-shadow: 0 3px 5px rgba(0, 0, 0, 0.05);
        }

        .tree-item:hover {
            background: #e8f4fc;
            transform: translateX(5px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.08);
        }

        .tree-item.active {
            background: #e1f5fe;
            border-left-color: #2ecc71;
        }

        .tree-item.search-match {
            background: #fff8e1;
            border-left-color: #ffc107;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(255, 193, 7, 0.4);
            }

            70% {
                box-shadow: 0 0 0 10px rgba(255, 193, 7, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(255, 193, 7, 0);
            }
        }

        .tree-item.search-highlight {
            background: #ffebee;
            border-left-color: #f44336;
        }

        .item-title {
            font-weight: 600;
            color: #2c3e50;
            font-size: 1.1rem;
        }

        .item-path {
            color: #7f8c8d;
            font-size: 0.9rem;
            margin-top: 5px;
        }

        .item-icon {
            color: #3498db;
            font-size: 1.2rem;
            transition: transform 0.3s ease;
        }

        .tree-item.collapsed .item-icon {
            transform: rotate(-90deg);
        }

        .details-panel {
            flex: 1;
            min-width: 300px;
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            height: fit-content;
        }

        .details-title {
            color: #2c3e50;
            font-size: 1.8rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #3498db;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .details-title i {
            color: #3498db;
        }

        .no-selection {
            color: #7f8c8d;
            font-style: italic;
            text-align: center;
            padding: 40px 20px;
        }

        .section-details {
            display: none;
        }

        .section-details.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .detail-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }

        .detail-icon {
            width: 60px;
            height: 60px;
            background: #3498db;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
        }

        .detail-title {
            font-size: 1.8rem;
            color: #2c3e50;
        }

        .detail-path {
            color: #7f8c8d;
            font-size: 1rem;
            margin-top: 5px;
        }

        .detail-content {
            margin-top: 25px;
        }

        .detail-section {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px dashed #eee;
        }

        .detail-section:last-child {
            border-bottom: none;
        }

        .detail-section h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.3rem;
        }

        .detail-section h3 i {
            color: #3498db;
        }

        .subsections-list {
            list-style: none;
            margin-top: 15px;
        }

        .subsections-list li {
            padding: 10px 15px;
            background: #f8f9fa;
            margin-bottom: 8px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.2s ease;
            border-left: 3px solid #3498db;
        }

        .subsections-list li:hover {
            background: #e8f4fc;
            transform: translateX(5px);
        }

        .subsections-list li i {
            color: #3498db;
        }

        .search-highlight-text {
            background-color: #ffeb3b;
            padding: 2px 4px;
            border-radius: 3px;
            font-weight: bold;
        }

        .footer {
            text-align: center;
            padding: 20px;
            color: #7f8c8d;
            font-size: 0.9rem;
            margin-top: 20px;
        }

        .url-generator {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .url-generator h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #3498db;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .url-input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .url-input {
            flex: 1;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            font-family: monospace;
            background: #f8f9fa;
        }

        .url-btn {
            padding: 15px 25px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            white-space: nowrap;
        }

        .url-btn:hover {
            background: #2980b9;
        }

        .url-btn.copy {
            background: #2ecc71;
        }

        .url-btn.copy:hover {
            background: #27ae60;
        }

        .share-links {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        .share-link {
            padding: 8px 15px;
            background: #f8f9fa;
            border-radius: 5px;
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            color: #2c3e50;
            transition: all 0.2s ease;
            border: 1px solid #e0e0e0;
        }

        .share-link:hover {
            background: #e8f4fc;
            transform: translateY(-2px);
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }

        .url-examples {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            font-size: 0.9rem;
        }

        .url-examples h4 {
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .url-examples ul {
            padding-left: 20px;
        }

        .url-examples li {
            margin-bottom: 5px;
            font-family: monospace;
            color: #3498db;
            word-break: break-all;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #2ecc71;
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 10000;
            transform: translateX(150%);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.error {
            background: #e74c3c;
        }

        .notification.warning {
            background: #f39c12;
        }

        .qr-code-container {
            text-align: center;
            margin-top: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            display: none;
        }

        .qr-code-container.show {
            display: block;
        }

        #qrCode {
            max-width: 200px;
            margin: 0 auto;
        }

        .link-format-options {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .link-format-option {
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
        }

        .link-format-option input[type="radio"] {
            margin: 0;
        }

        .short-url {
            font-size: 0.9rem;
            color: #7f8c8d;
            margin-top: 10px;
            word-break: break-all;
        }

        .search-tips {
            background: #e8f4fc;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            font-size: 0.9rem;
            color: #2c3e50;
        }

        .search-tips h4 {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: #3498db;
        }

        .search-tips ul {
            padding-left: 20px;
        }

        .search-tips li {
            margin-bottom: 5px;
        }

        .breadcrumb {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 10px;
        }

        .breadcrumb a {
            color: #3498db;
            text-decoration: none;
            transition: color 0.2s ease;
        }

        .breadcrumb a:hover {
            color: #2980b9;
            text-decoration: underline;
        }

        .breadcrumb span {
            color: #7f8c8d;
        }

        .breadcrumb i {
            color: #95a5a6;
        }

        @media (max-width: 768px) {
            .content-wrapper {
                flex-direction: column;
            }

            .hierarchy-container,
            .details-panel {
                min-width: 100%;
            }

            h1 {
                font-size: 2.2rem;
            }

            .controls {
                flex-direction: column;
                align-items: center;
            }

            .btn {
                width: 100%;
                max-width: 300px;
                justify-content: center;
            }

            .search-box {
                padding: 15px 20px;
                padding-left: 50px;
                font-size: 1rem;
            }

            .url-input-group {
                flex-direction: column;
            }

            .url-btn {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1><i class="fa-solid fa-shield-halved"></i> Православие</h1>
            <p class="subtitle">Защита Православия от ересей и расколов</p>

            <div class="search-container">
                <div class="search-icon">
                    <i class="fas fa-search"></i>
                </div>
                <input type="text" class="search-box" id="searchInput"
                    placeholder="Введите запрос для поиска по названию, описанию или содержимому...">
                <div class="search-results" id="searchResults">
                    <div class="search-stats">
                        <span id="resultsCount">0 результатов</span>
                        <span id="searchTime">0 мс</span>
                    </div>
                    <div id="resultsList"></div>
                </div>
            </div>

            <div class="controls">
                <button class="btn btn-expand-all" id="expandAll">
                    <i class="fas fa-expand-alt"></i> Раскрыть все
                </button>
                <button class="btn btn-collapse-all" id="collapseAll">
                    <i class="fas fa-compress-alt"></i> Свернуть все
                </button>
                <button class="btn" id="clearSearch">
                    <i class="fas fa-times"></i> Очистить поиск
                </button>
                <button class="btn" id="resetView">
                    <i class="fas fa-redo"></i> Сбросить вид
                </button>
                <button class="btn" id="generateLinkBtn">
                    <i class="fas fa-link"></i> Ссылка на раздел
                </button>
            </div>
        </header>

        <div class="content-wrapper">
            <div class="hierarchy-container">
                <h2 class="hierarchy-title"><i class="fas fa-project-diagram"></i> Дерево разделов</h2>
                <div class="breadcrumb" id="breadcrumb">
                    <a href="#" data-path="/">Главная</a>
                </div>
                <ul class="tree" id="tree"></ul>
            </div>

            <div class="details-panel">
                <h2 class="details-title"><i class="fas fa-info-circle"></i> Детали раздела</h2>
                <div class="no-selection" id="noSelection">
                    <i class="fas fa-mouse-pointer fa-3x" style="color: #bdc3c7; margin-bottom: 20px;"></i>
                    <h3>Выберите раздел для просмотра деталей</h3>
                    <p>Кликните на любой раздел в дереве слева, чтобы увидеть подробную информацию о нем</p>
                </div>
                <div id="detailsContent"></div>

                <!-- Генератор ссылок -->
                <div class="url-generator" id="urlGenerator" style="display: none;">
                    <h3><i class="fas fa-external-link-alt"></i> Внешняя ссылка на этот раздел</h3>

                    <div class="link-format-options">
                        <label class="link-format-option">
                            <input type="radio" name="linkFormat" value="path" checked>
                            Использовать путь раздела (рекомендуется)
                        </label>
                        <label class="link-format-option">
                            <input type="radio" name="linkFormat" value="id">
                            Использовать ID раздела
                        </label>
                    </div>

                    <div class="url-input-group">
                        <input type="text" class="url-input" id="generatedUrl" readonly>
                        <button class="url-btn copy" id="copyUrlBtn">
                            <i class="far fa-copy"></i> Копировать
                        </button>
                    </div>

                    <div class="short-url" id="shortUrlInfo">
                        Короткая ссылка: <span id="shortUrl"></span>
                    </div>

                    <div class="share-links">
                        <a href="#" class="share-link" id="shareEmail">
                            <i class="far fa-envelope"></i> Email
                        </a>
                        <a href="#" class="share-link" id="shareWhatsApp">
                            <i class="fab fa-whatsapp"></i> WhatsApp
                        </a>
                        <a href="#" class="share-link" id="shareTelegram">
                            <i class="fab fa-telegram"></i> Telegram
                        </a>
                        <button class="share-link" id="showQrBtn">
                            <i class="fas fa-qrcode"></i> QR-код
                        </button>
                    </div>

                    <div class="qr-code-container" id="qrCodeContainer">
                        <canvas id="qrCode"></canvas>
                        <p style="margin-top: 10px; color: #7f8c8d;">Отсканируйте QR-код для перехода к разделу</p>
                    </div>

                </div>
            </div>
        </div>

        <!-- Уведомление -->
        <div class="notification" id="notification">
            <i class="fas fa-check-circle"></i>
            <span id="notificationText">Ссылка скопирована в буфер обмена!</span>
        </div>

        <div class="footer">
            <p>Православное Христианство &copy; 2025 | Всего разделов: <span id="totalSections">0</span></p>
            <p>Текущий URL: <span id="currentUrl"
                    style="font-family: monospace; color: #3498db; font-size: 0.9rem;"></span></p>
        </div>
    </div>

    <!-- Подключаем библиотеку для генерации QR-кодов -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>

    <script>
        // Данные иерархии разделов
        const hierarchyData = {
            id: "root",
            title: "Главная страница",
            path: "/",
            description: "Основная страница сайта, точка входа для всех пользователей",
            content: "Добро пожаловать на главную страницу нашего сайта. Отсюда вы можете получить доступ ко всем основным разделам. Наш сайт предлагает информацию о православии и защите его от ереси экуменизма",
            icon: "fas fa-home",
            color: "#3498db",
            children: [
                {
                    id: "about",
                    title: "Ересь экуменизма",
                    path: "/about",
                    description: "Раздел с информацией о ереси",
                    content: "Творения святых отцов и официальные документы",
                    icon: "fas fa-building",
                    color: "#2ecc71",
                    children: [
                        {
                            id: "history",
                            title: "Святые отцы об ереси",
                            path: "/about/history",
                            description: "Высказывания святых отцов об ереси экуменизма",
                            content: "Святые отцы",
                            icon: "fas fa-history",
                            color: "#9b59b6",
                            children: [
                                {
                                    id: "fathers_1",
                                    title: "Прп. Иустин Челийский",
                                    path: "/about/history/fathers_1",
                                    description: "Прп. Иустин Челийский",
                                    content: "Экуменизм – это общее название всех видов псевдохристианства и всех псевдоцерквей Западной Европы. В нем сущность всех родов гуманизма с папизмом во главе. А все этому есть общее евангельское название: ересь, ибо в течение всей истории разные ереси не считали важными или искажали отдельные особенности Христа, а эти новые европейские ереси отвергают, оттесняют, отстраняют Богочеловека и на Его место ставят человека, и здесь нет существенного различия между папизмом, протестантизмом и другими сектами, имя которым легион.",
                                    icon: "fas fa-user-tie",
                                    color: "#f39c12"
                                },
                                {
                                    id: "fathers_2",
                                    title: "Прп. Паисий Святогорец",
                                    path: "/about/history/fathers_2",
                                    description: "Прп. Паисий Святогорец",
                                    content: "Преподобный Паисий Святогорец говорил: «Сегодня, к несчастью, и у нас появилась европейская «корректность», и люди стремятся показать себя добрыми. Желая проявить свое «высшее благородство», они заканчивают тем, что кланяются двурогому диаволу. «Пусть будет одна религия», — говорят они и все ставят на одну доску. Ко мне в каливу тоже приходили несколько человек с такими взглядами. «Нам, то есть всем, кто верует во Христа, — говорили они мне, — надо объединиться в одну религию». – «Это все равно что предлагать мне собрать в одну кучу столько-то каратов золота и столько-то отделений от этого золота меди, чтобы снова сделать из них один сплав, — ответил я. – Но разве разумно опять смешивать золото с дешевыми металлами? Ведь было столько борьбы, чтобы очистить догмат от мусора». Святые Отцы знали, что делали. Они воспретили общение с еретиками не без причины. Но сегодня призывают к совместным молитвам не только с еретиком, но и с буддистом, огнепоклонником и сатанистом. «Православные, — говорят, — тоже должны присутствовать на экуменических совместных молитвах и конференциях. Это – свидетельство!» Да какое там еще «свидетельство»! Эти люди разрешают все проблемы с помощью логики, они находят оправдание тому, чему не может быть оправдания».<br><br>Диавол закинул сети, чтобы поймать в них всё человечество. Богатых он хочет уловить масонством, бедных коммунизмом, а верующих - ЭКУМЕНИЗМОМ",
                                    icon: "fas fa-code",
                                    color: "#1abc9c"
                                },
                                {
                                    id: "fathers_3",
                                    title: "Свт. Марк Эфесский",
                                    path: "/about/history/fathers_2",
                                    description: "Свт. Марк Эфесский",
                                    content: "Никогда, о человек, то, что относится к Церкви, не исправляется через компромиссы: нет ничего среднего между истиной и ложью. (Свт. Марк Эфесский)",
                                    icon: "fas fa-paint-brush",
                                    color: "#d35400"
                                }
                            ]
                        },
                        {
                            id: "docs",
                            title: "Официальные документы",
                            path: "/about/docs",
                            description: "Документы, связынные с ересью экуменизма",
                            content: "Документы",
                            icon: "fas fa-history",
                            color: "#9b59b6",
                            children: [
                                {
                                    id: "p_1",
                                    title: "Архиерейский Собор 2016 года",
                                    path: "/about/docs/p1",
                                    description: "ПОСТАНОВЛЕНИЯ Освященного Архиерейского Собора Русской Православной Церкви (2-3 февраля 2016 года)",
                                    content: '3. Члены Архиерейского Собора свидетельствуют, что в своем нынешнем виде проекты документов Святого и Великого Собора не нарушают чистоту православной веры и не отступают от канонического предания Церкви. <a href="https://www.patriarchia.ru/article/97654" target="_blank">https://www.patriarchia.ru/article/97654</a>',
                                    icon: "fas fa-user-tie",
                                    color: "#f39c12"
                                }
                            ]
                        }
                    ]
                },
                {
                    id: "live",
                    title: "Жития святых",
                    path: "/live",
                    description: "Раздел с житиями святых",
                    content: "Жития святых",
                    icon: "fas fa-building",
                    color: "#2ecc71",
                    children: [
                        {
                            id: "live_1",
                            title: "Прп. максим Исповедник",
                            path: "/live/live_1",
                            description: "Житие преподобного отца нашего Максима Исповедника",
                            content: `Память 21 января
<br>
Великий не только по имени827, но и по жизни, преподобный Максим родился в великом царственном городе Константинополе. Происходя от высокопоставленных и благочестивых родителей, он получил серьезное научное образование. Он основательно изучил философию и богословие, достиг высшей славы своею мудростью и был уважаем даже в царских палатах. Царь Ираклий828, видя его разум и праведную жизнь, почтил его, помимо его воли, званием первого своего секретаря и включил его в число своих советников. Преподобный Максим пользовался любовью и уважением среди придворных и был весьма полезен всему царственному городу.

<br>В это время возникла ересь монофелитов, признававших в Христе Господе нашем только одну волю и одно хотение829. Развилась эта ересь из прежде бывшей евтихианской ереси, которая безрассудно признавала во Христе одно только естество, вопреки православному исповеданию, требующему признавать в Господе нашем, воплотившемся Боге, два естества и две воли, два хотения и действия, особенные для каждого естества, но соединенные в одном Лице Христовом, ибо Христос есть Бог, не на два лица разделяемый, но в двух естествах неслитно познаваемый. Защитниками и распространителями ереси монофелитов были вначале: Кир, патриарх Александрийский, Сергий Константинопольский830 и даже сам царь Ираклий, увлеченный ими в эту ересь. Созвав поместные соборы, Кир – в Александрии, а Сергий – в Константинополе, они утвердили эту ересь, повсюду разослали свое постановление и совратили весь Восток. Один только святой Софроний, патриарх Иерусалимский, противился ереси, не принимая лжеучения. Блаженный Максим, видя, что ересь проникла и в царские палаты и совратила самого царя, стал опасаться, как бы и ему не совратиться в ересь по примеру многих. Поэтому он оставил свое звание и всю славу мирскую и пошел в монастырь, отстоявший далеко от города, по названию Хрисопольский831, где и стал иноком, предпочитая «быть у порога в доме Божием, нежели жить в шатрах нечестия» (Пс.83:11).832 Там, спустя несколько лет, он за свою добродетельную жизнь был избран настоятелем (аввой).
<br>
<br>Между тем патриарх Сергий внушил царю Ираклию написать исповедание их неправой веры. Это последнее, исполненное монофелитской ереси, царь назвал «экфесис», то есть изложение833, и повелел всем так веровать в своем государстве, вследствие чего Церковь Христова была раздираема смутою. Авва Максим, видя, какую смуту переживали церкви в Константинополе и по всему Востоку и как множились и укреплялись еретики, между тем как Православие умалялось и было колеблемо бурею гонения, скорбел духом, воздыхал и много плакал. Услышав же, что на Западе эта ересь не нашла последователей и совершенно отвергнута, так как папа римский Северин834 не принял царского «изложения», а преемник его на римском престоле, папа Иоанн835, предал на соборе это «изложение» анафеме, блаженный Максим оставил свой монастырь и пошел в западные страны. Он хотел найти себе приют в старом Риме, так как жить в Иерусалиме не было возможности по случаю нападения на Палестину сарацин836. В Рим он пошел, предпочитая жить с православными, твердо хранившими веру. Направляясь туда, он посещал в лежавших ему на пути городах африканских епископов и, беседуя с ними, утверждал их в вере, научал, как избежать коварства противников и как избавиться от их хитросплетенных сетей837; к некоторым же, находившимся далеко, он посылал письма, поучая правоверию и убеждая всячески остерегаться ереси.
<br>
<br>В это время умер Сергий, патриарх Константинопольский, а место его занял Пирр, приверженец той же ереси838; равным образом умер и Кир, патриарх Александрийский, а затем скончался и сам царь. Однако ранее своей кончины, видя, что многие великие и святые архиереи и Богомудрые отцы не только отвергают его изложение веры, но и предают его анафеме, царь сильно устыдился и повсеместно известил, что это не его исповедание, а прежде бывшего патриарха Сергия, который сам написал «изложение» и только убедил царя подписать его. Когда умер царь Ираклий, преемником ему был сын его Константин839, но и тот, процарствовав только четыре месяца, умер, тайно отравленный своею мачехою Мартиною, которая, при содействии и патриарха840, возвела на престол своего сына Ираклиона. Но спустя шесть месяцев против Ираклиона восстали все сановники; схватив его, они отрезали ему нос, равно как и матери его Мартине, и затем с позором изгнали их в ссылку. На престол же они возвели сына Константина, внука Ираклия, по имени Констанса, от которого впоследствии родился Константин, прозванный Погонатом841. По воцарении Констанса тогдашний Константинопольский патриарх Пирр, единомышленник Мартины, по народному мнению вместе с нею отравивший сына Ираклия – Константина, отца новопоставленного царя Констанса, сильно испугался и, самовольно сложив с себя патриарший сан, бежал в ссылку в Африку. После него занял Константинопольский патриарший престол Павел842, также еретик-монофелит. Той же ересью увлекся и царь и стал великим ее поборником и распространителем.
<br>
<br>Когда преподобный оставался в Африканской стране, прибыл туда Пирр, патриарх Константинопольский, который бежал со своего престола и, обходя города, совращал православных в свою ересь. Много вреда причинил бы он там Христовой Церкви, если бы не имел противника себе в лице преподобного Максима, встречаясь с которым он по целым часам состязался в прениях о вере. Епископы африканские по необходимости должны были собираться в Карфаген, чтобы послушать прения обоих о вере, так как этого желал патриций843 Григорий, правитель той страны. Когда составился собор и начались прения, Богомудрый Максим победил Пирра, опровергнув его доводы на основании Божественных книг и догматов святых отцов844. Он доказал, что как во Христе Боге два естества, так должны быть в Нем и две воли, два хотения и действования, – нераздельные, однако, в одном лице. Побежденный в споре Пирр присоединился к православным и был принят Церковью с любовью и почетом, с титулом патриарха. Тогда же он составил и книгу православного исповедания. Затем он пошел в Рим к папе Феодору, который был преемником Иоанна. Папа принял его с почетом, как православного Константинопольского патриарха. Когда в Константинополе распространился слух, что Пирр присоединился к православным, то сонмище еретиков омрачилось завистью. Сочинив ложный рассказ, они распространили в народе слух, будто бы африканские епископы и папа принудили Пирра, помимо его воли, присоединиться к единомыслию с ними. Этот слух дошел до самого царя. Царь тотчас послал в Италию одного своего сановника, еретика, по имени Олимпия, чтобы он снова обратил Пирра к монофелитскому исповеданию. Олимпий, прибыв в Италию, остановился в городе Равенне845 и, вызвав к себе из Рима Пирра, убедил его вернуться к прежней ереси. Пирр же, уподобившись псу, возвращающемуся на свою блевотину, стал достоин анафемы, которой и был впоследствии предан святыми отцами вместе со своими единомышленниками.
<br>
<br>В это же время царь Констанс, по внушению Константинопольского патриарха, еретика Павла, написал, подобно деду своему Ираклию, составившему «изложение», – свое исповедание веры, исполненное ереси, и, назвав его типосом (образцом), разослал повсюду, повелевая так веровать846. Этот образец веры дошел до Рима, когда папа Феодор был уже на смертном одре. После его кончины преемником ему был блаженный Мартин. Царь желал, чтобы и новопоставленный папа принял написанный им типос веры, но папа отверг его, говоря:
<br>
<br>– Если бы и весь мир захотел принять это новое учение, противное православию, я не приму его и не отступлю от евангельского и апостольского учения, а равно и от преданий святых отцов, хотя бы мне пришлось претерпеть смерть.
<br>
<br>Святой Максим, авва Хрисопольского монастыря, находясь в это время в Риме847, советовал блаженному папе Мартину созвать Поместный собор и осудить соборно царское исповедание, названное «типосом», как еретическое и противное учению Христовой Церкви. Так и было сделано848. Папа, созвав своих епископов, числом сто пять, в среде коих был и авва Максим, предложил на обсуждение заблуждения Кира, Сергия, Пирра и Павла, а равно и царское еретическое исповедание, – предал лжеучения анафеме и написал повсеместно ко всем верующим, утверждая их в православии, разъясняя еретические заблуждения и предостерегая всячески беречься этих последних. Царь, услышав об этом, исполнился гнева и необычайной ярости и послал в Италию своего наместника Феодора Каллиопу, поручив ему захватить папу Мартина – после возведения на него обвинений: будто он вступил в соглашение с сарацинами, научая их вторгнуться в греко-римское царство и идти войною против царя, – будто веру, преданную св. отцами, он неправо содержит, а равно и хулит Пречистую Богоматерь. Прибыв в Рим, царский наместник публично возводил на папу эти обвинения. Блаженный Мартин, не будучи виновен ни в одном возводимом на него преступлении, защищался против злонамеренной клеветы.
<br>
<br>– С сарацинами, – говорил он, – я никогда не вступал в какое-либо соглашение, а только посылал милостыню православным братьям, живущим среди сарацин в крайней бедности и убожестве. Если же кто не почитает Пречистую Богоматерь, не исповедует Ее и не поклоняется Ей, тот да будет проклят в нынешнем веке и в будущем. Веру же святую, преданную святыми апостолами и святыми отцами, не мы, а иначе мудрствующие неправо сохраняют.
<br>
<br>Царский наместник, не слушая оправданий папы, признал его виновным во всем, присоединив еще и то, будто он незаконно взошел на престол. После этого он ночью тайком захватил папу, при помощи военной силы, и отправил его к царю. Папа был заточен в Херсонесе, где и скончался849.
<br>
<br>Несколькими днями ранее захвата папы был схвачен в Риме преподобный Максим вместе с учеником своим Анастасием и в оковах был отправлен в Константинополь. Это было сделано по царскому повелению, ибо царь знал, по чьему совету и внушению был созван собор для осуждения монофелитов и его послания. Когда преподобный прибыл водным путем в Византию, к нему явились посланные царем мужи, уже в самом взоре обнаруживавшие сильную неприязнь. Они бесстыдно схватили преподобного, босого и без одежды, скованного узами, и влачили его по улицам, в сопровождении огорченного ученика его. Приведши его в одно темное помещение, они заперли его одного, не дозволив быть с ним его ученику, которого заключили особо в темнице. Спустя несколько дней преподобный был приведен для допроса в царский дворец, в полное собрание сената, однако без царя во главе. Когда он вошел туда, взоры всех, исполненные злобы и неприязни, устремились на него. Снять допрос было поручено одному из сановников, казнохранителю850. Это был муж способный к обильному словопрению, красноречивый, хорошо умевший излагать ложные обвинения и превращать правду в неправду; в искажении же истины он был сведущ больше всех. Какой только злобы и бесстыдства он не показал, каких упреков и оскорблений он не нанес! Он не постыдился ни почтенной старости святого, который имел тогда более семидесяти лет от рождения, не смутился пред благодатью, сиявшею в его взорах, не пощадил ни кроткого и степенного, открытого и любвеобильного характера, ни звания преподобного. В то время как неправедный обвинитель говорил на неповинного многое, нисколько не соответствовавшее ни истине, ни здравому смыслу, и обнаруживал в своем многословии злонамеренную хитрость, дерзость и лукавство нрава, он проявлял тем самым во всех своих речах величайшее бесстыдство и неразумие. Конечно, он не мог отвечать основательно на убедительные, исполненные кротости и благоразумия возражения преподобного, а только проявлял в своих речах безрассудство и сбивчивость, а потому и был побеждаем. В частности, что тогда было сказано и сделано, какие обвинения возлагались на неповинного, как лживые люди старались представить свою неправду под видом истины, – это описал подробно ученик преподобного Максима, другой Анастасий, бывший апокрисиарием851 Римской Церкви. Мы приведем здесь на память немногое из его обширного повествования.
<br>
<br>Как только беззаконный обвинитель, по званию казнохранитель, стал пред лицом святого, он тотчас начал поносить его, незлобивого, бранными словами и стращать угрозами, называя его бессовестным, предателем отечества, врагом царю, и приписывать ему все постыдное и преступное. Когда же святой спросил обвинителя, почему он возводит на него такие обвинения и в каком предательстве упрекает, – сановник возвел на него возмутительную клевету и представил заведомо ложных свидетелей. Он упрекал преподобного, будто он многие великие города предал варварам: так, отторгнув от родных пределов Александрию, весь Египет и Пентаполь852, он присоединил их к владениям сарацин, к которым был дружески расположен и доброжелателен. Святой разъяснил, что возводимое на него обвинение ложно и достойно смеха.
<br>
<br>– Какое мне дело, иноку, – говорил он, – до завоевателей городов, и мог ли я, как христианин, иметь общение с сарацинами? Напротив, я всегда желал только одного полезного для христианских городов.
<br>
<br>Но бесстыдный клеветник обратился к иным видам лжи, сплетая их, как какие-либо сновидения, и, возвышая до неприличия голос, кричал, будто блаженный Максим хулил восточного царя, называя более достойными почета царей западных. При этом он ссылался на лжесвидетелей. Преподобный, тяжко вздохнув, сказал на это:
<br>
<br>– Благодарю Бога моего за то, что я предан в ваши руки и терплю истязания за несправедливые вины, чтобы очистить ими свои вольные согрешения и пороки моей жизни. Но чтобы ответить кратко на ваши ложные обвинения, спрошу вас прежде всего: от меня ли самого вы слышали ту хулу на царя, о которой говорите, или иной кто-либо сказал вам о ней?
<br>
<br>Они ответили:
<br>
<br>– Мы слышали от других, слышавших это из уст твоих.
<br>
<br>Когда же святой просил призвать их, чтобы они засвидетельствовали лично, обвинители сказали, что их уже нет в живых.
<br>
<br>Святой сказал на это:
<br>
<br>– Если вы говорите, что те, которые слышали хулу из уст моих, уже умерли, то почему вы не привлекли меня к допросу раньше, когда они еще были живы? Тогда и вы освободились бы от излишнего труда, и я понес бы наказание за явную вину. Но достоверно одно: как ложны ваши клеветы, возводимые на меня, так и те, которые привлекли меня к суду, не имели пред очами своими Бога, испытующего сердца человеческие. Да не буду я достоин видеть пришествие Господне и перестану называться христианином, если когда-либо я даже помыслил то ложное сновидение853, выдуманное вами, или рассказал его пред кем-либо, или слышал от кого!
<br>
<br>Тогда призвали одного лжесвидетеля, по имени Григорий, который утверждал, что слышал в Риме, как ученик Максима Анастасий называл царя «попом», а этому научился он у своего учителя Максима. Святой Максим, возражая против Григория, мужественно опроверг его лживую клевету. Он говорил:
<br>
<br>– Когда Григорий был в Риме, то вел с нами беседу только о единоволии, предлагая нам принять догматическое сочинение, названное «типосом». Но на это мы ответили отказом, предпочитая полезное душам нашим. Того же, что вы говорите теперь, ни я не знаю, ни ученик мой никогда не говорил, – в этом Бог свидетель! Однако я помню, как я говорил тогда, не ученику своему, а самому Григорию следующее: исследовать и определять догматы веры есть дело священнослужителей, а не императоров, потому что им предоставлено и помазывать царя, и возлагать на него руки, и совершать таинство Евхаристии, и предстоять алтарю, и совершать все прочие Божественные и величайшие таинства. Вот что я говорил тогда и ныне говорю. Припомнить эти мои слова не откажется и сам Григорий, а если бы отказался, то отказался бы от самого себя. За все это пусть всякий или обвинит, или оправдает меня пред судом.
<br>
<br>Не зная, что делать, обвинители, надеявшиеся на силу лжесвидетельства, вывели преподобного вон из собрания. Затем был введен ученик его Анастасий. Последнего они старались смутить строгими речами и резкими угрозами, убеждая его, чтобы он подтвердил клевету на учителя своего. Они вынуждали его засвидетельствовать, будто учитель его жестоко обращался в Риме с Пирром, когда состязался с ним о вере. Анастасий мужественно утверждал, что учитель его не только не сделал никакого зла Пирру, но и обращался с ним с особенным почтением. За такое прямодушие они начали бить Анастасия кулаками по шее, по лицу и по голове, желая таким образом победить истину насилием, – а затем отправили его в прежнюю темницу. После этого, не довольствуясь прежним ложным обвинением и пристрастным допросом, они снова призвали святого Максима и покушались победить его твердость новою клеветою. Клевета состояла в том, будто бы святой Максим был последователем учения Оригена854 и соглашался с ним во всем. Святой легко и свободно опроверг их ложные обвинения как совершенно бездоказательные. Об Оригене он выразился как об отлученном от общения с Христом и с христианами, а последователей его учения признал достойными суда Божиего. Тогда они снова стали допрашивать святого Максима о Пирре и о тех причинах, по которым он отделился от Константинопольского патриарха и не желает вступить с ним в общение. Испытывали они святого и другими вопросами, предлагали ему принять царский «типос» и относиться к последнему с особенным почтением, как к совершеннейшему и обязательному догматическому изложению веры. Святой возражал им, а они досаждали ему многими резкими упреками. Однако, видя себя побеждаемыми преподобным Максимом во всех своих спорах и запутывающимися в собственных сетях, они распустили собрание и поспешно отправились к царю, чтобы засвидетельствовать непобедимое мужество Хрисопольского аввы.
<br>
<br>– Максим, – говорили они, – непобедим в речах, и никто не может убедить его, чтобы он стал нашим единомышленником, – даже если бы кто-либо стал его мучить!
<br>
<br>После этого преподобный опять был посажен в темницу. Спустя немного времени пришли к нему другие собеседники, полагая, что если часто с ним состязаться и устрашать его грозными словами, то гораздо скорее можно будет склонить его к своей вере. Пришедшие заявили, что они посланы патриархом, и затем стали спрашивать святого:
<br>
<br>– Какой ты Церкви: Византийской или Римской, Антиохийской, Александрийской или Иерусалимской? Ибо все эти церкви с подчиненными им областями находятся в единении. Поэтому, если и ты принадлежишь к Кафолической церкви, то немедленно вступи в общение с нами, – если только не желаешь подвергнуться тяжкому изгнанию и испытать то, чего не ожидаешь.
<br>
<br>На это праведный муж весьма разумно ответил им:
<br>
<br>– Христос Господь назвал Кафолическою церковью ту, которая содержит истинное и спасительное исповедание веры. За это исповедание он и Петра назвал блаженным, и на нем обещал основать Вселенскую Церковь855. Однако я хочу узнать содержание вашего исповедания, на основании которого все церкви, как вы говорите, вступили в общение. Если оно не противно истине, то и я не отступлю от него.
<br>
<br>Послы ответили ему:
<br>
<br>– Хотя нам и не поручено говорить с тобою об этом, однако – скажем. Мы исповедуем во Христе два действия по причине различия естеств и одно действие вследствие соединения обоих естеств в одном Лице.
<br>
<br>Святой сказал на это:
<br>
<br>– Если вы говорите о двух действиях, что они сделались единым действием вследствие соединения естеств в одном Лице, то значит, кроме тех двух действий, вы признаете еще новое, третье действие, слиянное, или Богочеловеческое.
<br>
<br>– Нет, – ответили послы, – мы признаем два действия, а говорим об одном по причине соединения их.
<br>
<br>Святой возразил на это:
<br>
<br>– Вы сами создаете себе шаткую веру и исповедуете, что Бог может существовать, не имея бытия. Ибо, если вы сольете два действия в одно, по причине соединения естеств в одном Лице, и затем разделите единое действие на два, по причине различия естеств, тогда не будет ни единства, ни двойства действий, так как двойство единением и единство раздвоением взаимно исключаются; мало того, эти ухищрения делают совершенно недействительным то, в чем пребывают действия (т. е. Богочеловечество), – даже вовсе устраняют его, как не имеющее свойственного ему по природе такого обнаружения, которое не могло бы быть ни отнятым у естества, ни измененным. В противном случае естество, как не проявляющее себя в сродных ему действиях, по разумению святых отцов, лишилось бы всего бытия856. Но этого я признать не могу, и не научился от святых отцов так веровать. Вы же, как имеющие власть, делайте со мною, что вам угодно.
<br>
<br>Они, не зная, что возразить на это, сказали, что неповинующийся им должен подлежать анафеме и принять положенную ему смерть. Святой кротко и смиренно отвечал:
<br>
<br>– Да совершится на мне воля Божия во славу святого имени Его.
<br>
<br>Тогда послы отправились к патриарху и передали все, сказанное преподобным. Царь, посоветовавшись с патриархом, как некогда Пилат с иудеями, осудил святого на изгнание в небольшой городок, находившийся во Фракии, по имени Визию857. Равным образом и ученика его Анастасия они послали в заточении на далекую окраину Греческого царства, в одно весьма суровое место, называемое на варварском языке Перверою858. То же было сделано и с другим учеником преподобного, также Анастасием, бывшим некогда в Риме апокрисиарием, который впоследствии написал житие преподобного Максима. Его сослали в Месемврию859, город во Фракии.
<br>
<br>В это же время был привезен в Царьград блаженный Мартин, папа Римский, и после многих страданий сослан в заточение в Херсонес860. Еще ранее его ссылки, когда он находился в Константинополе, умер Павел, патриарх Константинопольский. После него был поставлен патриархом упомянутый выше Пирр861, но и тот спустя четыре месяца скончался. Тогда на патриарший престол вступил Петр862, упорный последователь той же монофелитской ереси.
<br>
<br>Прошло много времени, и снова были посланы от имени царя и патриарха Петра к святому Максиму почтенные мужи: Феодосий, епископ Кесарии Вифинской863, и два консула – Павел и Феодосий, чтобы обратить его к своему единомыслию. Они употребили к обращению святого много разнообразных способов, то льстя преподобному, то угрожая, то испытуя его в вере, то вопрошая. Когда они явились вместе с визийским епископом и повелели святому сесть, епископ Феодосий обратился к нему со словами:
<br>
<br>– Как поживаешь, господин, авва Максим?
<br>
<br>Он отвечал:
<br>
<br>– Так, как Господь от века предузнал и предопределил обстоятельства моей жизни, сохраняемой Его промыслом.
<br>
<br>Феодосий возразил на это:
<br>
<br>– Как так? Разве Бог от века предузнал и предопределил деяния каждого из нас?
<br>
<br>Святой отвечал:
<br>
<br>– Бог предузнал наши помышления, слова и деяния, которые зависят от нашей воли; предуставил же и предопределил то, что должно случиться с нами, но что находится уже не в нашей власти, а в Его Божественной воле.
<br>
<br>Епископ Феодосий спросил:
<br>
<br>– Что же находится в нашей власти и что не в нашей?
<br>
<br>Святой Максим ответил:
<br>
<br>– Все это ты знаешь, господин мой, и, только испытывая меня, раба своего, вопрошаешь.
<br>
<br>Епископ сказал на это:
<br>
<br>– Воистину я не знаю этого, и хочу уразуметь, какое различие между тем что состоит в нашей власти и что не состоит и как одно относится к Божественному предведению, а другое к предопределению?
<br>
<br>Преподобный Максим ответил:
<br>
<br>– Все наши добрые и дурные дела зависят от нашего произволения; не в нашей же власти – наказания и бедствия, случающиеся с нами, а равно и противоположное им. В самом деле, мы не имеем власти над изнуряющею нас болезнью или над здоровьем, но только над теми условиями, которые причиняют болезнь или сохраняют здоровье. При этом, как причиною болезни служит невоздержание, а воздержание служит условием доброго здоровья, – так и соблюдение заповедей Божиих служит условием достижения Царства Небесного, а несоблюдение их – причиною ввержения в геенну огненную.
<br>
<br>Епископ сказал ему:
<br>
<br>– Зачем ты мучаешь себя этим изгнанием, совершая достойное такого бедствия?
<br>
<br>– Молю Бога, – ответил святой, – чтобы Он, наказывая меня тем бедствием, простил мне грехи, сделанные преступлением святых Его заповедей.
<br>
<br>Епископ возразил на это:
<br>
<br>– Не для испытания ли со многими случаются беды?
<br>
<br>– Искушаемы бывают святые, – отвечал преподобный, – чтобы обнаружились для всех их тайные добродетели, как это было с Иовом и Иосифом. И подлинно, Иов был искушаем ради обнаружения никому неизвестного в нем мужества, а Иосиф подвергся напасти, чтобы стали явными его целомудрие и воздержание, соделывающие человека святым. Да и каждый из святых, если недобровольно страдал в этом мире, то страдал для того именно, чтобы попускаемыми ему от Бога бедствиями победить гордого отступника, дьявола – змея; самое терпение в каждом святом было следствием искушения.
<br>
<br>На это епископ Феодосий сказал:
<br>
<br>– Поистине, хорошо и поучительно ты говоришь, и я хотел бы о подобных вещах всегда беседовать с тобою, – но так как я и спутники мои, почтеннейшие патриции, пришли к тебе, несмотря на громадное расстояние, ради другого дела, то просим тебя: прими то, что мы предложим тебе, и доставь радость всей вселенной.
<br>
<br>– Что именно, господин мой? – спросил святой. – Да и кто я такой и откуда я, чтобы мое соизволение на ваше предложение могло обрадовать весь мир?
<br>
<br>Епископ сказал:
<br>
<br>– Как непреложны истины Господа моего Иисуса Христа, так и то, что я буду говорить тебе, а равно и сотрудники мои, уважаемые патриции, – мы слышали непосредственно от нашего патриарха и благочестивого царя.
<br>
<br>– Скажите же, господа мои, – ответил Святой Максим, – чего вы хотите и что вы слышали?
<br>
<br>Тогда Феодосий стал говорить:
<br>
<br>– Император и патриарх, прежде всего, желают узнать от тебя: почему ты удаляешься от общения с Константинопольским престолом?
<br>
<br>Святой Максим ответил:
<br>
<br>– Вы знаете нововведения, принятые шестого индикта истекшего круга864. Они начались в Александрии через обнародование Киром, бывшим там патриархом, девяти глав, одобренных и утвержденных Константинопольским престолом. Были и иные изменения и дополнения (экфесис и типос), искажающие соборные определения. Эти нововведения были сделаны первыми представителями Византийской церкви – Сергием, Пирром и Павлом – и известны всем церквам. Вот причина, по которой я, раб ваш, не вступаю в общение с Константинопольскою Церковью. Пусть будут уничтожены в Церкви эти соблазны, введенные упомянутыми выше мужами, – пусть будут устранены введшие их – и очистится путь спасения от преград, и вы пойдете тогда гладким путем Евангелия, очищенным от всякой ереси! Когда же я увижу Константинопольскую Церковь такою, какою она была прежде, тогда и я обращусь к ней, как был и раньше ее сыном, и вступлю в общение с нею без всякого увещания человеческого. Пока же в ней будут еретические соблазны и еретики архиереи, никакое слово или дело не убедит меня, чтобы я когда-либо вступил в общение с ними.
<br>
<br>– Но что же худого, – спросил епископ Феодосий, – в нашем исповедании, что ты не хочешь иметь общения с нами?
<br>
<br>Святой Максим ответил:
<br>
<br>– Вы исповедуете, что было одно действие у Божества и человечества Спасителя, – между тем если доверять святым отцам, утверждающим, что у кого есть одно действие, у того и естество одно, то вы исповедуете Святую Троицу не как Троицу, а как четверицу, как будто воплощение было единосущным Слову и отступило от тождества с человеческим естеством, которое есть у нас и было у Пречистой Девы Богородицы; по отступлении же от сродного человеку тожества, как будто образовалась новая сущность, единосущная Слову в той же мере, в какой Слово единосущно Отцу и Духу; таким образом, является уже не Троица, а четверица. Равным образом, когда вы отрицаете действия и утверждаете, что у Божества и человечества Христова была одна воля, вы умаляете свободную самодеятельность Его в делании добра. Ибо если то и другое естество не имеет собственного, присущего ему действия, то если и захочет кому-либо благодетельствовать, не сможет этого, так как у него отнята способность к деланию добра. Ведь без способности действовать и без свойственного естеству действия никакая вещь не может что-либо произвести или сделать. С другой стороны, признавая вочеловечение Христа, вы исповедуете одну волю в двух естествах, но тем самым вы признаете, что и Плоть Его, по своей воле, была создательницею всех веков и всей твари, совокупно с Отцом, и Сыном, и Святым Духом; между тем по естеству, она сама создана. Или лучше сказать: плоть по своей воле безначальная, – ибо воля Божия безначальная, как и Божество не имеет начала, – а по естеству своему плоть создана во времени. Но так исповедовать не только безумно, а и безбожно, ибо вы не просто говорите об одной только воле во Христе, но называете ее Божественною, а у Божественной воли не может предполагаться ни начала, ни конца, как и у Самого Божества. Вы отнимаете также у Христа Господа все обнаружения и свойства, по которым познается Его Божество и человечество, когда экфесисом и типосом требуете не говорить ни об одной, ни о двух волях в Нем, ни о действиях Его. Эта воля не едина, потому что вы разделяете ее на две самым подчинением человеческой воли Божественной; их и не две, потому что вы сливаете их в едину.
<br>
<br>Когда святой Максим говорил это и многое другое, о чем подробно сообщает ученик его Анастасий, Феодосий и патриции начали сознавать свое заблуждение. Однако епископ сказал:
<br>
<br>– Прими написанный царем типос не как положительный догмат веры, но как способ решения сомнительных вопросов. Он и написал не в смысле законодательства, а в смысле истолкования веры.
<br>
<br>Святой Максим отвечал:
<br>
<br>– Если типос не есть положительный закон, утверждающий единство воли и действия Господа нашего, то зачем вы сослали меня в страну варваров и неведущих Бога язычников? За что я осужден оставаться здесь в Визии? За что сотрудники мои изгнаны: один в Перверу, а другой в Месемврию?
<br>
<br>Когда затем вспомнили о том Поместном соборе, который был созван в Риме блаженным папою Мартином для осуждения монофелитов, епископ Феодосий сказал:
<br>
<br>– Не имеет значения этот собор, потому что он был созван не по царскому повелению.
<br>
<br>Преподобный ответил:
<br>
<br>– Если утверждаются только постановления соборов, созываемых по царскому повелению, то не может быть православной веры. Вспомните о соборах, созываемых по царскому повелению против единосущия, на которых установлено богохульное учение, что Сын Божий не единосущен Богу Отцу. Таковы соборы: первый в Тире, второй – в Антиохии, третий в Селевкии, четвертый в Константинополе при Евдоксии арианине, пятый в Никее, шестой в Сирмии, а спустя много времени – седьмой в Ефесе под председательством Диоскора. Все эти соборы созывались по царским повелениям; однако все они отвергнуты и преданы анафеме, так как на них были составлены вероопределения безбожные и богопротивные. Притом, почему вы не отвергаете того собора, который осудил Павла Самосатского и предал его анафеме? Ведь во главе этого собора стояли: Дионисий, папа Римский, Дионисий Александрийский и Григорий Чудотворец, который и председательствовал на этом соборе. Этот собор происходил без царского повеления; однако он тверд и неопровержим. Православная Церковь признает истинными и святыми только те соборы, на которых установлены истинные и непреложные догматы. И подлинно, как знает это и твоя святость, и других поучает тому же, каноны повелевают – в каждой христианской стране созывать поместные соборы дважды в год – как для защищения спасительной веры нашей, так и для исправления того, что требует исправления; однако церковные правила не говорят о царских повелениях.
<br>
<br>После продолжительной беседы и упорного спора с обеих сторон уста преподобного Максима исполнились Божественной мудрости и красноречия, и язык его, движимый Святым Духом, одолел противников. Последние долго сидели молча, склонив головы и опустив глаза. Затем они умилились и начали плакать, после чего встали и поклонились святому, равно как и он им. После совместной молитвы они с радостью согласились с истинным учением святого Максима и с любовью приняли это учение, причем и сами обещали веровать согласно с ним и царя надеялись убедить к тому же. Для подтверждения же своего обещания они облобызали Божественное Евангелие, честный крест и святые иконы Спасителя и Пресвятой Богородицы. Затем, побеседовав достаточно о полезных для души вещах, они дали друг другу целование о Господе и, пожелав взаимно мира, возвратились – епископ Феодосий и патриции – в Византию. Когда они изложили царю все сказанное и сделанное, царь сильно разгневался. Тогда Феодосий и оба патриция, убоявшись царского гнева, снова обратились к ереси. Затем опять был послан в Визию патриций Павел с поручением доставить преподобного Максима в Константинополь, однако – с почетом. Когда святой Максим был привезен, ему повелено было жить в монастыре святого Феодора865.
<br>
<br>Наутро были посланы царем к преподобному два патриция – Епифаний и Троил. Они явились в сопровождении многих знатных мужей, с отрядом войска и слугами, с пышностью и суетным величием. Вместе с ними пришел и вышеупомянутый епископ Феодосий, его ожидал преподобный Максим и надеялся на исполнение его обещания, по которому не только он сам должен был истинно веровать, но и царя, и всех других представителей народа возвратить православию. Но Феодосий солгал, предпочитая угождать царю земному и суетному миру, нежели следовать Царю Небесному и Его святой Церкви. Когда все сели и убедили сесть преподобного, начал беседу патриций Троил.
<br>
<br>– Царь, владыка вселенной, – начал он, – прислал нас к тебе возвестить то, что угодно его царской власти, утвержденной Богом, но прежде скажи нам: исполнишь ли ты волю государя или нет?
<br>
<br>Святой Максим ответил:
<br>
<br>– Прежде я выслушаю, господин мой, что повелевает мне государь, и сообразно с этим отвечу тебе. Ибо как я могу отвечать на то, чего еще не знаю?
<br>
<br>Троил же настаивал, говоря:
<br>
<br>– Не скажем тебе, с чем мы явились, пока ты не ответишь нам, окажешь ли повиновение царю.
<br>
<br>Преподобный муж, видя, что посланные требуют настойчиво, смотрят злобно и резкими словами допрашивают его, будет ли он повиноваться царской воле, отвечал:
<br>
<br>– Так как вы не хотите сказать мне, рабу вашему, что угодно господину нашему, царю, то объявляю вам, пред лицом Самого Бога и Его святых Ангелов, следующее: если царь повелит мне что-либо такое, что имеет временное и преходящее значение, притом непротивное Богу и безвредное для вечного спасения души, то я охотно исполню.
<br>
<br>Когда святой сказал это, патриций Троил тотчас встал, и хотел уходить, говоря:
<br>
<br>– Я ухожу, потому что вижу, что сей муж не исполнит царской воли.
<br>
<br>Но тотчас поднялся шум и началось сильное смятение среди пришедшего сюда множества народа. Тогда епископ Феодосий сказал:
<br>
<br>– Объявите ему волю государя и выслушайте его ответ, ибо нехорошо уйти, ничего не сказав ему и не выслушав его ответа.
<br>
<br>После этого патриций Епифаний начал говорить преподобному:
<br>
<br>– Вот что царь приказывает объявить тебе: так как весь Восток и те на Западе, которые увлечены в соблазн, взирая на тебя, производят смуты и волнения, являясь отступниками от веры и строя козни, причем не хотят в деле веры иметь с нами общения, то да смягчит Господь кротостью твое сердце, чтобы ты вступил в общение с нами, приняв изданный нами типос. Мы же, приняв тебя с любовью, с великою честью и славою введем тебя в церковь и поставим рядом с нами, где обычно стоят цари, и приобщимся вместе с тобою Пречистых и Животворящих Таин Тела и Крови Христовых. Потом провозгласим тебя нашим отцом, и будет радость не только во всем христолюбивом граде нашем, но и во всем христианском мире. Ибо мы твердо уверены, что когда ты вступишь в общение со святою Константинопольскою Церковью, то присоединятся к нам и все, которые ради тебя и под твоим руководством отпали от общения с нами.
<br>
<br>Святой авва Максим, обратившись к епископу Феодосию, со слезами сказал:
<br>
<br>– Все мы, владыка, ожидаем Великого дня Судного. Ты помнишь, что было недавно говорено и обещано пред святым Евангелием, животворящим Крестом и святыми иконами Спасителя нашего Иисуса Христа и Пренепорочной Его Матери, Пречистой Богородицы и Приснодевы Марии.
<br>
<br>Епископ, с потупленным вниз взором, кротко сказал:
<br>
<br>– Что же могу я сделать, когда благочестивый царь хочет иного?
<br>
<br>Авва Максим отвечал ему:
<br>
<br>– Зачем же ты и бывшие с тобою касались святого Евангелия, когда у вас не было твердого намерения исполнить обещанное? Поистине, все силы небесные не убедят меня сделать то, что вы предлагаете. Ибо, какой ответ дам я, не говорю – Богу, но моей совести, если из-за пустой славы и мнения людского, ничего не стоящего, отвергну правую веру, которая спасает любящих ее?
<br>
<br>Когда святой сказал это, тотчас все встали, исполненные гнева и бешенства и, бросившись к нему, начали не только ругать его бранными словами, но и возложили на него руки. Схватив его, они били его руками, терзали, туда и сюда влачили его по полу, толкали и топтали его ногами, и каждый старался достать его, чтобы ударить. Они непременно убили бы святого, если бы епископ Феодосий не укротил их ярости и не успокоил волнения. Когда перестали бить и терзать святого, то начали плевать на него, и оплевали человека Божиего с головы до ног. Смрад исходил от их гадких плевков, которыми была испачкана вся одежда его.
<br>
<br>Тогда епископ сказал им:
<br>
<br>– Не следовало бы делать этого; нужно было только выслушать его ответ и донести царю, ибо дела, подлежащие церковным правилам, иначе судятся.
<br>
<br>С трудом епископ убедил их прекратить шум и снова сесть. Они, не переставая поносить святого грубыми ругательствами и оскорбительными упреками, уселись.
<br>
<br>Тогда патриций Епифаний, дыша яростью, с гневом обратился к святому:
<br>
<br>– Скажи нам, злой старик, одержимый бесом! Зачем ты говоришь такие речи? Не считаешь ли ты еретиками всех нас, и город наш, и царя нашего? Знай, что мы более тебя христиане и более тебя православные. Мы признаем в Иисусе Христе, Господе нашем, Божественную и человеческую волю и душу разумную, ибо всякое разумное существо всегда имеет и силу произволения, по самому естеству своему, и способность деятельности. Вообще, живому существу свойственно движение, а уму присуща воля. Мы признаем и Господа имеющим власть хотения не по Божеству только, но и по человечеству, а особенно мы не отрицаем его двух волей и двояких действий.
<br>
<br>Авва Максим отвечал:
<br>
<br>– Если вы веруете так, как учит Церковь Божия, и как прилично разумному существу, то зачем принуждаете меня принять «типос», который совершенно отрицает то, что вы говорите теперь?
<br>
<br>Епифаний возразил:
<br>
<br>– Типос написан ради улажения не совсем понятных истин, чтобы не впал в заблуждение народ вследствие особенной тонкости их выражения.
<br>
<br>На это авва Максим ответил:
<br>
<br>– Это противно вере, а между тем всякий человек освящается правильным исповеданием веры.
<br>
<br>Тогда патриций Троил возразил:
<br>
<br>– Типос не отрицает двух волей во Христе, а только заставляет молчать о них ради мира Церкви.
<br>
<br>Авва Максим сказал на это:
<br>
<br>– Замалчивать слово, значит, отрицать его, как об этом говорит Дух Святой через пророка: «Нет языка, и нет наречия, где не слышался бы голос их» (Пс.18:4). Поэтому, если какое-либо слово не высказывается, то это вовсе не есть слово.
<br>
<br>Тогда Троил сказал:
<br>
<br>– Имей в сердце своем какую угодно веру; никто тебе не запрещает.
<br>
<br>Святой Максим возразил:
<br>
<br>– Но полное спасение зависит не от одной сердечной веры, а и от исповедания ее, ибо Господь говорит: «кто отречется от Меня пред людьми, отрекусь от того и Я пред Отцем Моим Небесным» (Мф.10:33). Равно и Божественный апостол учит: «сердцем веруют к праведности, а устами исповедуют ко спасению» (Рим.10:10). Если же Бог и Божественные пророки и апостолы повелевают исповедовать словом и языком таинство веры, которое приносит всему миру спасение, то нельзя принуждать к молчанию относительно исповедания, чтобы не умалялось спасение людей.
<br>
<br>На это Епифаний злобным голосом воскликнул:
<br>
<br>– Подписал ли ты постановления собора, бывшего в Риме?
<br>
<br>– Подписал, – ответил святой.
<br>
<br>Тогда Епифаний продолжал:
<br>
<br>– Как ты осмелился подписать и анафемствовать исповедующих веру так, как прилично разумным существам и как учит Кафолическая Церковь? Воистину, собственным судом мы приведем тебя в город и поставим на площадь связанного, соберем всех комедиантов, и блудниц и весь народ, и заставим их бить тебя по щекам и плевать тебе в лицо.
<br>
<br>На это Святой отвечал:
<br>
<br>– Да будет так, как ты сказал. Если же ты утверждаешь, что мы анафемствовали тех, которые признают два естества, соединившиеся в Господе нашем, а равно две воли и два действия, соответствующие каждому естеству во Христе Господе, Который по естеству Божественному есть истинный Бог, а по естеству человеческому – истинный человек, то прочти, господин мой, книгу, заключающую в себе деяния этого собора, и если вы найдете то, что сказали, делайте, что хотите. Ибо я и сотрудники мои, и все подписавшие деяния собора, анафематствовали тех, которые, подобно Арию и Аполлинарию866, признают в Господе одну волю и одно действие и не исповедуют Господа нашего и Бога имеющим два естества, в которых Он пребывает, а равно имеет силу хотения и действования, коими совершает наше спасение.
<br>
<br>Тогда друзья Епифания и патриции, и все, пришедшие с ними, начали говорить между собою:
<br>
<br>– Если мы и далее станем слушать его, то нам не придется ни есть, ни пить. Поэтому пойдем и пообедаем и затем возвестим царю и патриарху то, что мы слышали. Вы видите, что этот окаянный предал себя сатане.
<br>
<br>Затем, встав, они ушли обедать. Было же в этот день предпразднство Воздвижения Честного Креста и уже наступало время всенощного бдения. Отобедав, они отправились в город крайне недовольные.
<br>
<br>На другой день (14 cентября), рано утром, явился к преподобному Максиму патриции Феодосий, отнял все книги, какие имел святой, и сказал от имени царя:
<br>
<br>– Так как ты не захотел почета, то иди в изгнание, которое ты заслужил.
<br>
<br>Святой старец тотчас был взят воинами и отведен сначала в Селемврию, где он оставался два дня. В течение этого времени один воин из Селемврии, отправившись в армию, распустил по лагерю молву, возбуждая против старца народ словами: «Пришел к нам один инок, который хулит Пречистую Богородицу». Начальник армии, призвав важнейших клириков города Селемврии, а равно пресвитеров, диаконов и почетнейших иноков, послал их к блаженному Максиму – узнать: правда ли то, что говорят о нем, будто он хулит Божию Матерь? Когда они пришли, преподобный встал и поклонился до земли, воздавая почет их званию. Они также поклонились святому и затем все сели. Тогда один из пришедших, весьма почтенный старец, очень кротко и почтительно спросил преподобного Максима:
<br>
<br>– Отче, так как некоторые соблазнились относительно твоей святости, утверждая, будто бы ты не признаешь Госпожу нашу Пречистую Деву Богородицу Матерью Божией, то заклинаю тебя Пресвятою единосущною Троицею сказать нам истину и изъять соблазн из сердец наших, чтобы и мы не погрешили, неправильно думая о тебе.
<br>
<br>Преподобный Максим преклонился на землю крестообразно, а потом, вставши, воздел руки к небу и торжественно произнес со слезами:
<br>
<br>– Кто не исповедует Госпожу нашу, всепетую, Святейшую и пренепорочную деву, честнейшую всех разумных существ, истинною Матерью Бога, сотворившего небо и землю, море и все, что в них, тот да будет анафема от Отца, и Сына, и Святого Духа, единосущной и преестественной Троицы, и от всех сил небесных, от лика святых апостолов и пророков, и бесконечного множества мучеников, и от всякой праведной души, скончавшейся в вере, ныне, всегда и во веки веков!
<br>
<br>Услышав это, все прослезились и высказали ему благопожелания в словах:
<br>
<br>– Бог да укрепит тебя, отче, и да сподобит тебя достойно и беспрепятственно совершить свое поприще!
<br>
<br>После этого собралось туда множество воинов послушать благочестивые речи отцов, беседующих между собою. Тогда один из приближенных начальника армии, видя большое стечении войска, усердно слушающего слова святого и порицающего правительство за изгнание его, повелел немедленно вывести оттуда святого и вести его далее за два поприща867, пока снарядятся те, которые должны вести его в Перверу в заточение. Клирики, подвигнутые Божественною любовью, шли те два поприща пешком, провожая святого. Когда пришли воины, чтобы вести его в изгнание, клирики понесли святого на руках и посадили на коня. Затем они обнимали его со слезами и, простившись с ним, возвратились в свой город. Святого же повели в Перверу и там заключили в темнице.
<br>
<br>Прошло много времени868, и царь снова послал привести в Константинополь из заточения преподобного Максима и обоих его учеников. Когда они пристали к городу на корабле, при захождении солнца, явились два начальника стражи с десятью воинами и, выведши их из корабля полунагих и необутых, разлучили и заключили каждого особо. Спустя несколько дней их повели в царскую палату. Оба ученика были оставлены на дворе под стражей, а старец был введен внутрь, где заседали сановники и многие почетнейшие лица. Святой был поставлен среди восседавших правителей. Тогда царский казнохранитель, с раздражением в голосе, обратился к нему:
<br>
<br>– Христианин ли ты?
<br>
<br>Старец отвечал:
<br>
<br>– По благодати Христа, Бога всяческих, я – христианин.
<br>
<br>Казнохранитель исполнился гнева и сказал:
<br>
<br>– Ты говоришь неправду.
<br>
<br>Святой отвечал:
<br>
<br>– Ты говоришь, что я не христианин, а Бог говорит, что я неизменно пребываю христианином.
<br>
<br>– Но если ты христианин, – возразил казнохранитель, – то за что же ты ненавидишь царя?
<br>
<br>– Откуда это видно? – спросил святой. – Ведь ненависть есть сокровенное чувство души, точно так же, как и любовь.
<br>
<br>– Из дел твоих, – ответил казнохранитель, – всем стало известно, что ты враг царя и его царства. Ибо ты один предал сарацинам Египет, Александрию, Пентаполь, Триполис и Африку.
<br>
<br>– Где же достоверные доказательства этого? – спросил святой.
<br>
<br>Тогда ввели некоего Иоанна, бывшего когда-то сакелларием869 Петра – в то время, как Петр был наместником Нумидии Африканской870. Этот Иоанн сказал:
<br>
<br>– Двадцать два года тому назад, дед господина нашего царя повелел блаженному Петру, чтобы он вел войска в Египет против сарацин. Петр, доверяя тебе, как рабу Божию, писал к тебе, прося полезного совета. Но ты отписал ему, что не благоугодно Богу помогать царю Ираклию и наследникам его.
<br>
<br>Тогда святой сказал ему:
<br>
<br>– Если ты говоришь правду и имеешь письмо Петра ко мне и мое письмо к Петру, то покажи их; пусть их прочтут, и я приму достойную казнь по закону.
<br>
<br>Иоанн ответил:
<br>
<br>– Я не имею писем ваших, и даже не знаю, писали ли вы друг другу, но в лагере тогда все об этом говорили.
<br>
<br>Святой возразил:
<br>
<br>– Если целое войско об этом говорило, то почему только ты один на меня клевещешь? Видел ли ты даже меня когда-либо или я тебя?
<br>
<br>– Нет, – отвечал Иоанн. – Я никогда не видел тебя.
<br>
<br>Тогда святой, обратившись к собранию, сказал:
<br>
<br>– Судите сами: справедливо ли ставить в свидетели таких людей? Сказано ведь: «каким судом судите, таким будете судимы; и какою мерою мерите, такою и вам будут мерить» (Мф.7:2). От Бога, праведного Судьи всех.
<br>
<br>Затем ввели Сергия Магуду. Тот сказал:
<br>
<br>– Назад тому девять лет блаженный авва Фома, пришедший из Рима, рассказывал мне следующее: посылал меня, говорил он, папа Феодор к Григорию, префекту Африки, отложившемуся в то время от греческой империи, сказать ему, чтобы он не боялся греческих войск, ибо раб Божий, авва Максим, видел сон, будто на небесах, на востоке и на западе, стояли лики Ангелов. Из них, бывшие на востоке, восклицали: «Константин Август, ты победишь!» Находившиеся же на западе восклицали: «Григорий Август, ты победишь!» При этом голос западного лика был яснее и громче, чем восточного.
<br>
<br>Когда Магуда изложил это, казнохранитель сказал святому:
<br>
<br>– Вот тебя привел Бог в этот город на сожжение огнем.
<br>
<br>Святой ответил:
<br>
<br>– Благодарю Бога, очищающего вольные мои согрешения невольными наказаниями. Но «горе миру от соблазнов, ибо надобно прийти соблазнам; но горе тому человеку, через которого соблазн приходит» (Мф.18:7). Поистине, не следовало бы говорить этого пред христианами, а тем более оставлять без наказания тех, которые говорят и думают только угодное людям, ныне живущим, а завтра не существующим. Все это нужно было объявлять в то время, когда был еще жив Григорий. Тогда следовало бы призвать сюда патриция Петра, авву Фому и блаженного папу Феодора; я в присутствии всех их сказал бы патрицию Петру: скажи, господин мой, писал ли ты когда-либо ко мне о том, о чем свидетельствует твой сакелларий, или, быть может, я писал к тебе? Равным образом и блаженному папе я сказал бы: скажи, владыка, рассказывал ли я когда-либо тебе сон? Но если бы и папа обличил меня относительно сна, то в этом была бы его вина, а, не моя, ибо сонное видение есть вещь непроизвольная, а закон наказывает только те деяния, которые зависят от свободной воли человека.
<br>
<br>Возводились при этом на неповинного и святого мужа и другие клеветы и несправедливые обвинения, особенно относительно хулы на царя, – будто он и его ученики порицали в Риме царя. Однако святой, доказывая свою невинность, опровергал все эти клеветы, в кротости своей, смиренными, премудрыми и вдохновенными речами.
<br>
<br>Затем введен был отдельно ученик его Анастасий. Его побуждали, чтобы он сказал что-либо дурное о своем учителе, и когда тот не хотел говорить неправды на праведного мужа, его избили кулаками и затем отвели его и учителя его, каждого порознь, по своим местам в темницы.
<br>
<br>На другой день вечером пришли к преподобному в темницу патриций Троил и Сергий Евфратас, начальник царской трапезы. Они сели и, заставив сесть преподобного, спросили:
<br>
<br>– Скажи нам, авва, какую беседу вел ты в Африке и в Риме с Пирром и какими доводами убедил ты его отказаться от его собственного догмата и принять твой догмат?
<br>
<br>Святой ответил:
<br>
<br>– Если бы были со мною мои книги, в которые я записал бывшие у нас там с Пирром беседы и споры, то я все подробно рассказал бы вам; но так как книги у меня отняты, то что могу припомнить, то и скажу.
<br>
<br>Затем святой рассказал по порядку все, что мог припомнить, прибавив в заключение следующее:
<br>
<br>– Я никакого собственного догмата не имею, а только общий всей Кафолической Церкви; я не внес в свое исповедание ни одного нового слова, по которому оно могло бы называться моим собственным.
<br>
<br>Затем посланные спросили его:
<br>
<br>– Что же ты не вступишь в общение с Константинопольским престолом?
<br>
<br>– Нет, – ответил святой.
<br>
<br>– Почему же? – спросили они.
<br>
<br>– Потому, – ответил Святой, – что предстоятели этой церкви отвергли постановления четырех святых соборов, приняв за правило «девять глав», изданных в Александрии, а затем приняли экфесис, составленный Сергием, Константинопольским патриархом, и наконец, типос, в недавнее время обнародованный. С другой стороны, все, утвержденное в экфесисе, они отвергли в типосе и много раз сами себя отлучили от Церкви и изобличили в неправомыслии. Мало того, сами себя отлучив от Церкви, они низложены и лишены священства на Поместном соборе, бывшем недавно в Риме. Какое же тайнодействие они могут совершать? Или какой Дух снизойдет на тех, которые ими рукополагаются?
<br>
<br>– Значит, ты один спасешься, – возразили ему, – а все прочие погибнут?
<br>
<br>Святой ответил на это:
<br>
<br>– Когда все люди поклонялись в Вавилоне золотому истукану, три святые отрока никого не осуждали на погибель. Они не о том заботились, что делали другие, а только о самих себе, чтобы не отпасть от истинного благочестия (Дан.3). Точно так же и Даниил, брошенный в ров, не осуждал никого из тех, которые, исполняя закон Дария, не хотели молиться Богу, а имел в виду свой долг и желал лучше умереть, чем согрешить и казниться пред своею совестью за преступление Закона Божиего (Дан.14:31). И мне не дай Бог осуждать кого-либо, или говорить, что я один спасусь. Однако же я соглашусь скорее умереть, чем, отступив в чем-либо от правой веры, терпеть муки совести.
<br>
<br>– Но что ты будешь делать, – сказали ему посланные, – когда римляне соединятся с византийцами? Вчера ведь пришли из Рима два апокрисиария, и завтра, в день воскресный, будут причащаться с патриархом Пречистых Тайн.
<br>
<br>Преподобный ответил:
<br>
<br>– Если и вся вселенная начнет причащаться с патриархом, я не причащусь с ним. Ибо я знаю из писаний святого апостола Павла, что Дух Святой предает анафеме даже Ангелов, если бы они стали благовествовать иначе, внося что-либо новое (Гал.1:8).
<br>
<br>Тогда посланные спросили:
<br>
<br>– Неужели совершенно необходимо исповедовать во Христе две воли и двоякого рода деятельность?
<br>
<br>– Совершенно необходимо, – отвечал святой, – если мы хотим благочестиво мыслить, ибо никакое существо не лишено природной деятельности. Святые отцы ясно говорят, что ни одно существо не может ни существовать, ни быть познаваемым без сродного ему действования. Если этого нет и если естество не обнаруживается в действовании, то каким образом можно признавать Христа истинным Богом по естеству и истинным человеком?
<br>
<br>На это ему сказали:
<br>
<br>– Мы видим, что это – истинная правда, однако – не огорчай царя, который, ради мира Церкви, составил типос не для того, чтобы отрицать что-либо из признаваемых во Христе свойств, но ради спокойствия Церкви, повелевая молчать о тех вещах, которые порождают разногласие.
<br>
<br>Тогда человек Божий, простершись на землю, отвечал со слезами:
<br>
<br>– Не следовало бы огорчаться доброму и боголюбивому царю по поводу моего недостоинства, ибо я не хочу прогневать Бога, умалчивая о том, что Он повелел признавать и исповедовать. Ибо если, по слову Божественного апостола, Сам Он положил «в Церкви, во-первых, апостолами, во-вторых, пророками, в-третьих, учителями» (1Кор.12:28), то ясно, что Сам Он и говорит чрез них. Из всего же Священного Писания, из творений святых учителей и из постановлений соборных мы научаемся, что воплотившийся Иисус Христос, Господь и Бог наш, имеет силу хотеть и действовать по Божеству и по человечеству. Ибо у Него вовсе нет недостатка в тех свойствах, по которым Он познается, как Бог, или как человек, кроме греха. Если же Он совершен по обоим естествам и не лишен ничего, свойственного им, то, поистине, тот совершенно извращает тайну Его вочеловечения, кто не признает в Нем самого существа обоих естеств с соответствующими им свойствами, – естеств, через которые и в которых Он пребывает.
<br>
<br>Когда святой изложил это и многое другое, пришедшие похвалили его мудрость и не нашли, что возразить ему. Сергий же сказал:
<br>
<br>– Один ты огорчаешь всех, – именно тем, что из-за тебя многие не хотят иметь общения со здешней Церковью.
<br>
<br>Преподобный Максим возразил:
<br>
<br>– Но кто может утверждать, что я кому-нибудь повелевал не иметь общения с Византийскою Церковью? На это Сергий отвечал:
<br>
<br>– То самое, что ты не сообщаешься с этою Церковью, сильнее всего отвращает многих от общения с нею. Человек Божий сказал на это:
<br>
<br>– Нет ничего тягостнее и печальнее того состояния, когда совесть в чем-либо обличает нас, и нет ничего дороже спокойствия и одобрения совести. Затем Троил, обращая внимание на то, что «типос» царя Константа анафематствован по всему Западу, сказал святому:
<br>
<br>– Хорошо ли, что толкование благочестивого государя нашего так бесславится? Святой ответил:
<br>
<br>– Да простит Бог тем, которые внушили императору и допустили его издать этот указ!
<br>
<br>Троил спросил:
<br>
<br>– Кто же внушил и кто допустил?
<br>
<br>Святой ответил:
<br>
<br>– Предстоятели Церкви научили, а сановники допустили, и таким образом позор соблазна падает на неповинного и чуждого всякой ереси царя. Однако посоветуйте государю сделать то же, что сделал некогда блаженной памяти дед его Ираклий. Когда он узнал, что многие отцы на Западе не принимают «изложения» веры, а равно обличают и осуждают заключающуюся там ересь, – очистил себя от упрека в этом, разослав повсюду свои послания и утверждая в них, что «изложение» принадлежит не ему, а бывшему патриарху Сергию. Пусть сделает то же и ныне царствующий государь, и тогда он будет освобожден от всякого упрека.
<br>
<br>Они долго молчали, качая головою, а затем сказали:
<br>
<br>– Неудобно и даже невозможно сделать все то, что ты советуешь, авва.
<br>
<br>Побеседовав еще достаточно о разных предметах, они простились и дружелюбно расстались.
<br>
<br>Чрез неделю после этого разговора, в следующую субботу, святого и обоих его учеников опять позвали в царскую палату к допросу. Прежде был введен более ранний ученик его Анастасий, а другой Анастасий, бывший апокрисиарий Римской церкви, был поставлен вне палаты. Когда первый Анастасий был введен в залу, где сидели среди членов сената два патриарха: Фома, Константинопольский патриарх, и какой-то другой, тотчас вошли и клеветники, возводившие на преподобного Максима ложные обвинения. Присутствующие заставляли Анастасия подтверждать клеветы, возводимые на его учителя. Но он дерзновенно изобличал ложь, мужественно возражая пред патриархами и сенатом. Когда же его спросили: анафематствовал ли он «типос», он ответил, что не только анафематствовал, но и составил против него книгу. Тогда сановники спросили:
<br>
<br>– Что же? Не признаешь ли ты, что ты дурно поступил?
<br>
<br>– Да не попустит мне Бог, – ответил Анастасий, – считать дурным то, что я сделал хорошо, согласно церковному правилу. Когда затем его спрашивали о многих других вещах, он отвечал, как ему помогал Бог. После этого его вывели, а ввели преподобного старца Максима. Патриций Троил обратился к нему со словами:
<br>
<br>– Послушай, авва, скажи правду, и Бог помилует тебя. Ибо если мы станем допрашивать тебя законным порядком и окажется истинным хотя бы одно из возводимых на тебя обвинений, то ты будешь казнен по закону. Старец отвечал:
<br>
<br>– Я уже сказал вам и опять скажу: настолько же возможно хотя бы одному обвинению быть справедливым, насколько сатане возможно стать Богом; но так как сатана не есть Бог и стать Им не может, будучи отступником, то и те обвинения не могут стать истинными, которые совершенно ложны. Поэтому, что хотите сделать, то и делайте; я же, благочестно почитая Бога, не боюсь обиды.
<br>
<br>На это Троил возразил:
<br>
<br>– Но разве ты не анафематствовал типоса?
<br>
<br>Старец отвечал:
<br>
<br>– Несколько раз уже я говорил, что анафематствовал.
<br>
<br>– Но если ты, – сказал Троил, – анафематствовал «типос», то, следовательно, – и царя?
<br>
<br>– Царя я не анафематствовал, – ответил преподобный, – а только хартию, ниспровергающую православную и церковную веру.
<br>
<br>– Где же ты анафематствовал? – спросил Троил.
<br>
<br>– На Поместном соборе, в Риме, – отвечал святой Максим, – в церкви Спасителя и Пресвятой Богородицы.
<br>
<br>Тогда обратился к нему председатель:
<br>
<br>– Вступишь ли ты в общение с нашею церковью или нет?
<br>
<br>– Нет, не вступлю, – отвечал святой.
<br>
<br>– Почему же? – спросил председатель.
<br>
<br>– Потому что она, – отвечал святой, – отвергла постановления православных соборов.
<br>
<br>– Но если церковь наша отвергла соборы, – возразил председатель, – то как же они записаны в месяцесловном диптихе871?
<br>
<br>– Какая польза, – отвечал святой, – от названий и воспоминания их, если догматы тех соборов отвергнуты?
<br>
<br>– Можешь ли ты, – спросил председатель, – ясно показать, что нынешняя Церковь отвергла догматы бывших ранее святых соборов?
<br>
<br>– Если не будете сердиться и повелите, – ответил старец, – то я легко могу показать.
<br>
<br>Когда все умолкли, к нему обратился казнохранитель:
<br>
<br>– За что ты так любишь римлян и ненавидишь греков?
<br>
<br>Святой ответил:
<br>
<br>– Мы имеем от Бога заповедь – никого не ненавидеть. Я люблю римлян, как единоверных со мною, а греков – как говорящих одним со мною языком.
<br>
<br>– А сколько тебе лет? – спросил казнохранитель.
<br>
<br>– Семьдесят пять, – отвечал святой.
<br>
<br>– А сколько лет, – продолжал казнохранитель, – находится при тебе твой ученик?
<br>
<br>– Тридцать семь, – отвечал святой.
<br>
<br>В это время один из клириков воскликнул:
<br>
<br>– Да воздаст тебе Бог за все, что ты сделал блаженному Пирру.
<br>
<br>Святой ничего не ответил этому клирику.
<br>
<br>Во время этих довольно продолжительных допросов ни один из находившихся там патриархов ничего не сказал. Когда же стали распространяться о соборе, бывшем в Риме, некто Демосфен заявил:
<br>
<br>– Не истинен этот собор, потому что созвал его Мартин, отлученный папа.
<br>
<br>Преподобный Максим отвечал:
<br>
<br>– Не отлучен папа Мартин, а подвергся гонению.
<br>
<br>После этого, выслав святого вон, они советовались, что с ним сделать? Бесчеловечные мучители находили, что было бы слишком милостиво оставить его жить по-прежнему, в заточении, и что лучше подвергнуть его мучениям более тяжким, чем смерть. Поэтому предали его в руки градского воеводы. Префект велел отвести святого Максима и учеников его в преторию872. Здесь беззаконный мучитель, прежде всего, обнажив святого старца и повергнув его на землю, велел бить его острыми воловьими жилами, не устыдившись ни старости его, ни почтенного вида, – не умиляясь и видом его тела, изможденного постническими подвигами. Святого били так жестоко, что земля обагрилась его кровью, а тело его было настолько иссечено, что не оставалось на нем ни одного неповрежденного места. Затем свирепый зверь с яростью обратился к ученикам преподобного и избил их в такой же степени. Когда их били, глашатай восклицал:
<br>
<br>– Неповинующиеся царским повелениям и остающиеся непокорными достойны терпеть такие страдания.
<br>
<br>Затем их, еле живых, ввергли в темницу.
<br>
<br>Наутро снова привели в судилище из темницы святого и преподобного мужа с первым учеником его Анастасием. Святой был еще жив и весь покрыт ранами, так что нельзя было смотреть без сострадания на почтенного старца, святого постника, Богомудрого учителя и исповедника-богослова, всего окровавленного и изъязвленного глубокими ранами, не имеющего с ног до головы неповрежденного места. Однако не сжалились над ним жестокосердные мучители, а пришли в еще большее озлобление. Извлекши его многоглаголивый язык, источавший реки премудрых учений и потоплявший еретические умствования, глубоко, у самой гортани, отрезали без всякого милосердия, и таким образом хотели наложить молчание на богословствующие уста святого. То же сделали и с более ранним учеником его Анастасием, а затем снова заключили их в темницу. Но Господь Бог, сделавший некогда грудных младенцев способными к восхвалению Своего святого имени, а равно давший немому способность речи, и этим Своим истинным и верным рабам, преподобному Максиму исповеднику и мученику, а равно и ученику его преподобному Анастасию, подал возможность и без языка говорить еще лучше и яснее, чем раньше, до усечения языка. О сколь тогда устыдились окаянные еретики, узнав об этом! Воспылав еще большею злобою, они отрезали его правую руку и бросили на землю. Точно так же они отрезали руку и ученику его, святому Анастасию. Другого же ученика его, также Анастасия, бывшего апокрисиария Римской Церкви, они пощадили, так как он по временам бывал секретарем у государей.
<br>
<br>После этого преподобного Максима и ученика его вывели из претории, и влачили их по всему городу с поруганием, – показывали их отрезанные языки и руки всему народу и безобразными голосами производили клик и насмешки. После такого бесчеловечного издевательства и бесчестного поругания сослали всех троих, каждого порознь, в дальнее изгнание, без всякой заботы о них, без пищи и одежды, нагих и босых. Много бедствий и страданий испытали они в пути. Преподобный Максим, вследствие тяжких ран, не мог держаться ни на лошади, ни в повозке. Воины сплели корзину, наподобие постели, и, положив в нее тяжко страдавшего старца, с большим трудом могли нести его к месту заточения. Препроводив его в отдаленную скифскую страну, которая в Европе называется Аланией873, они заключили его в темнице, в городе Шемари. Преподобный же ученик его Анастасий, которому были отрезаны язык и рука, еще на пути почил своим многотрудным и многострадальным телом, а душа его перешла к Богу в жизнь бессмертную.
<br>
<br>Преподобный Максим в своем последнем изгнании прожил, среди тяжких страданий, еще три года. Заключенный в темнице, он не пользовался ни от кого ни необходимыми в его старости услугами, ни человеколюбивым попечением. Когда же Господь восхотел положить конец его болезням и скорбям и вывести его из темницы на вечный простор и веселие Небесного Царствия, то утешил его прежде одним Божественным явлением на земле, а затем возвестил ему час кончины. Блаженный страдалец исполнился великой радости, и хотя всегда был готов к кончине, однако, начал усердно готовиться к ней. Когда же наступил радостный для него час смерти, он с весельем предал душу свою в руки Христа Бога, Которого возлюбил от своей юности и за Которого столько пострадал.
<br>
<br>Так исповедник Христов и мученик исполнил свой жизненный путь874 и вошел в радость Господа своего. Погребен он в том же городе. После погребения святого на могиле его были видны три чудесные лампады, светившие пламенем несказанного сияния и озарявшие то место. Святой, который при жизни своей был светом миру, и по кончине своей не переставал светить и ныне светит всем людям примером своей добродетельной и многострадальной жизни и великой ревности по Богу. Те три виденные на гробе святого лампады служили ясным знамением того, что Святой угодник Божий вселился в светлых обителях Пресвятой Троицы, немерцающих в Царствии Божием, где он сияет с праведными, как солнце, и наслаждается созерцанием Троичного света. После кончины преподобного Максима остался в живых, в отдельном заточении, другой ученик его, апокрисиарий Анастасий, который впоследствии с особенною подробностью описал житие, подвиги и страдания отца и учителя своего. Из этого описания здесь взято в сокращении то, что достаточно для пользы нашей, для прославления Бога, во святых славимого, Отца, и Сына, и Святого Духа, Которому и от нас грешных да будет честь, слава и поклонение, ныне и присно и во веки веков. Аминь.
<br>
<br>Кондак, глас 8:
<br>Троицы рачителя и великаго Максима, научающа ясно вере Божественней, еже славити Христа во дву естествах, волях же и действах суща, в песнех достойных, вернии, почтим взывающе: радуйся, проповедниче веры.
<br>
Другой кондак, глас 6:
Свет Трисиянный, всельшийся в душу твою, сосуд избран показа тя всеблаженне, являюща Божественная концем, неудобостижных разумений ты сказуяй, блаженне, и Троицу всем, Максиме, возпроповедуяй ясно, Пресущную, Безначальную.. <a href="https://azbyka.ru/otechnik/Dmitrij_Rostovskij/zhitija-svjatykh/70" target="_blank">https://azbyka.ru/otechnik/Dmitrij_Rostovskij/zhitija-svjatykh/70</a>`,
                            icon: "fas fa-user-tie",
                            color: "#f39c12"
                        }
                    ]
                }
            ]
        };

        // Состояние приложения
        let appState = {
            expandedNodes: new Set(['root']),
            selectedNode: null,
            searchQuery: '',
            searchResults: [],
            searchActive: false,
            linkFormat: 'path'
        };

        // Инициализация приложения
        document.addEventListener('DOMContentLoaded', function () {
            // Отображаем текущий URL
            updateCurrentUrlDisplay();

            // Проверяем URL параметры при загрузке
            checkUrlParameters();

            renderTree();
            updateTotalSections();

            // Обработчики кнопок
            document.getElementById('expandAll').addEventListener('click', expandAll);
            document.getElementById('collapseAll').addEventListener('click', collapseAll);
            document.getElementById('clearSearch').addEventListener('click', clearSearch);
            document.getElementById('resetView').addEventListener('click', resetView);
            document.getElementById('generateLinkBtn').addEventListener('click', showUrlGenerator);

            // Обработчики для генератора ссылок
            document.getElementById('copyUrlBtn').addEventListener('click', copyUrlToClipboard);
            document.getElementById('shareEmail').addEventListener('click', shareViaEmail);
            document.getElementById('shareWhatsApp').addEventListener('click', shareViaWhatsApp);
            document.getElementById('shareTelegram').addEventListener('click', shareViaTelegram);
            document.getElementById('showQrBtn').addEventListener('click', toggleQrCode);

            // Обработчики форматов ссылок
            document.querySelectorAll('input[name="linkFormat"]').forEach(radio => {
                radio.addEventListener('change', function () {
                    appState.linkFormat = this.value;
                    updateGeneratedUrl();
                });
            });

            // Обработчики поиска
            const searchInput = document.getElementById('searchInput');
            const searchResults = document.getElementById('searchResults');

            searchInput.addEventListener('input', function (e) {
                performSearch(e.target.value);
            });

            searchInput.addEventListener('focus', function () {
                if (appState.searchResults.length > 0) {
                    searchResults.style.display = 'block';
                }
            });

            searchInput.addEventListener('keydown', function (e) {
                if (e.key === 'Enter' && appState.searchResults.length > 0) {
                    const firstResult = appState.searchResults[0];
                    navigateToSearchResult(firstResult.node.id);
                    e.preventDefault();
                }

                if (e.key === 'Escape') {
                    clearSearch();
                }
            });

            // Закрытие результатов поиска при клике вне области
            document.addEventListener('click', function (e) {
                if (!searchInput.contains(e.target) && !searchResults.contains(e.target)) {
                    searchResults.style.display = 'none';
                }
            });

            // Изначально выбираем корневой элемент
            if (!appState.selectedNode) {
                selectNode('root');
            }

            // Слушаем изменения hash в URL
            window.addEventListener('hashchange', function () {
                checkUrlParameters();
            });

            // Слушаем изменения истории
            window.addEventListener('popstate', function () {
                checkUrlParameters();
                updateCurrentUrlDisplay();
            });
        });

        // Обновление отображения текущего URL
        function updateCurrentUrlDisplay() {
            document.getElementById('currentUrl').textContent = window.location.href;
        }

        // Проверка URL параметров при загрузке страницы
        function checkUrlParameters() {
            const urlParams = new URLSearchParams(window.location.search);
            const hashParams = window.location.hash.substring(1);

            // 1. Проверяем параметр path (приоритетный)
            let sectionPath = urlParams.get('path');

            // 2. Если нет path, проверяем id
            if (!sectionPath) {
                const sectionId = urlParams.get('id');
                if (sectionId) {
                    // Ищем узел по ID и получаем его путь
                    const node = findNodeById(sectionId);
                    if (node) {
                        sectionPath = node.path;
                    }
                }
            }

            // 3. Проверяем hash (для коротких ссылок)
            if (!sectionPath && hashParams) {
                // Пытаемся найти узел по hash
                const node = findNodeByHash(hashParams);
                if (node) {
                    sectionPath = node.path;
                }
            }

            // Если нашли путь, переходим к разделу
            if (sectionPath) {
                // Декодируем путь
                sectionPath = decodeURIComponent(sectionPath);

                // Ищем узел по пути
                const node = findNodeByPath(sectionPath);
                if (node) {
                    // Раскрываем всех родителей
                    expandAllParents(node);

                    // Выбираем узел
                    selectNode(node.id);

                    // Прокручиваем к элементу
                    setTimeout(() => {
                        const nodeElement = document.getElementById(`node-${node.id}`);
                        if (nodeElement) {
                            nodeElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        }
                    }, 100);

                    showNotification(`Переход к разделу: ${node.title}`, 'success');
                } else {
                    showNotification(`Раздел "${sectionPath}" не найден`, 'error');
                }
            }
        }

        // Поиск узла по пути
        function findNodeByPath(path) {
            // Нормализуем путь (убираем начальный и конечный слэши)
            const normalizedPath = path.replace(/^\/+|\/+$/g, '');

            function searchNode(node, currentPath) {
                // Сравниваем пути
                const nodePath = node.path.replace(/^\/+|\/+$/g, '');
                if (nodePath === normalizedPath) {
                    return node;
                }

                // Ищем в дочерних элементах
                if (node.children) {
                    for (const child of node.children) {
                        const found = searchNode(child, currentPath);
                        if (found) return found;
                    }
                }

                return null;
            }

            return searchNode(hierarchyData, '');
        }

        // Поиск узла по hash (короткая ссылка)
        function findNodeByHash(hash) {
            // Преобразуем hash в путь
            // Пример: "about-team" -> "/about/team"
            const path = '/' + hash.replace(/-/g, '/');
            return findNodeByPath(path);
        }

        // Генерация hash из пути (для коротких ссылок)
        function generateHashFromPath(path) {
            // Пример: "/about/team" -> "about-team"
            return path.replace(/^\/+|\/+$/g, '').replace(/\//g, '-');
        }

        // Показать генератор ссылок
        function showUrlGenerator() {
            const urlGenerator = document.getElementById('urlGenerator');
            const detailsContent = document.getElementById('detailsContent');
            const noSelection = document.getElementById('noSelection');

            if (!appState.selectedNode) {
                showNotification('Сначала выберите раздел', 'warning');
                return;
            }

            const node = findNodeById(appState.selectedNode);
            if (!node) return;

            // Показываем генератор ссылок
            urlGenerator.style.display = 'block';

            // Скрываем "нет выбора" если оно было показано
            noSelection.style.display = 'none';

            // Устанавливаем выбранный формат
            document.querySelector(`input[name="linkFormat"][value="${appState.linkFormat}"]`).checked = true;

            // Обновляем сгенерированные URL
            updateGeneratedUrl();
        }

        // Обновление сгенерированных URL
        function updateGeneratedUrl() {
            const node = findNodeById(appState.selectedNode);
            if (!node) return;

            // Генерируем основной URL
            const mainUrl = generateSectionUrl(node);
            document.getElementById('generatedUrl').value = mainUrl;

            // Генерируем короткий URL
            const shortUrl = generateShortUrl(node);
            document.getElementById('shortUrl').textContent = shortUrl;
            document.getElementById('shortUrlInfo').style.display = 'block';

            // Обновляем QR-код если он показан
            if (document.getElementById('qrCodeContainer').classList.contains('show')) {
                generateQrCode(mainUrl);
            }
        }

        // Генерация URL для раздела
        function generateSectionUrl(node) {
            const baseUrl = window.location.origin + window.location.pathname;
            const url = new URL(baseUrl);

            if (appState.linkFormat === 'path') {
                // Используем путь раздела
                const sectionPath = node.path.startsWith('/') ? node.path.substring(1) : node.path;
                url.searchParams.set('path', sectionPath);
            } else {
                // Используем ID раздела
                url.searchParams.set('id', node.id);
            }

            return url.toString();
        }

        // Генерация короткого URL (через hash)
        function generateShortUrl(node) {
            const baseUrl = window.location.origin + window.location.pathname;
            const hash = generateHashFromPath(node.path);
            return `${baseUrl}#${hash}`;
        }

        // Копирование URL в буфер обмена
        function copyUrlToClipboard() {
            const urlInput = document.getElementById('generatedUrl');
            urlInput.select();
            urlInput.setSelectionRange(0, 99999);

            navigator.clipboard.writeText(urlInput.value).then(() => {
                showNotification('Ссылка скопирована в буфер обмена!', 'success');
            }).catch(err => {
                // Fallback
                document.execCommand('copy');
                showNotification('Ссылка скопирована в буфер обмена!', 'success');
            });
        }

        // Поделиться по Email
        function shareViaEmail(e) {
            e.preventDefault();
            const node = findNodeById(appState.selectedNode);
            if (!node) return;

            const url = generateSectionUrl(node);
            const subject = `Ссылка на раздел: ${node.title}`;
            const body = `Привет!\n\nПосмотри этот раздел: ${node.title}\n${url}\n\n${node.description}`;

            window.location.href = `mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
        }

        // Поделиться через WhatsApp
        function shareViaWhatsApp(e) {
            e.preventDefault();
            const node = findNodeById(appState.selectedNode);
            if (!node) return;

            const url = generateSectionUrl(node);
            const text = `Посмотри этот раздел: ${node.title}\n${url}`;

            window.open(`https://wa.me/?text=${encodeURIComponent(text)}`, '_blank');
        }

        // Поделиться через Telegram
        function shareViaTelegram(e) {
            e.preventDefault();
            const node = findNodeById(appState.selectedNode);
            if (!node) return;

            const url = generateSectionUrl(node);
            const text = `Посмотри этот раздел: ${node.title}`;

            window.open(`https://t.me/share/url?url=${encodeURIComponent(url)}&text=${encodeURIComponent(text)}`, '_blank');
        }

        // Показать/скрыть QR-код
        function toggleQrCode(e) {
            e.preventDefault();
            const qrContainer = document.getElementById('qrCodeContainer');
            const isShowing = qrContainer.classList.contains('show');

            if (!isShowing) {
                const node = findNodeById(appState.selectedNode);
                if (node) {
                    const url = generateSectionUrl(node);
                    generateQrCode(url);
                    qrContainer.classList.add('show');
                }
            } else {
                qrContainer.classList.remove('show');
            }
        }

        // Генерация QR-кода
        function generateQrCode(url) {
            const canvas = document.getElementById('qrCode');
            canvas.width = 200;
            canvas.height = 200;

            QRCode.toCanvas(canvas, url, {
                width: 200,
                margin: 2,
                color: {
                    dark: '#2c3e50',
                    light: '#ffffff'
                }
            }, function (error) {
                if (error) {
                    console.error('Ошибка генерации QR-кода:', error);
                }
            });
        }

        // Показать уведомление
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notificationText');

            notificationText.textContent = message;
            notification.className = 'notification';
            notification.classList.add(type, 'show');

            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Функция выбора узла
        function selectNode(nodeId) {
            appState.selectedNode = nodeId;

            // Обновление классов активных элементов
            document.querySelectorAll('.tree-item').forEach(item => {
                item.classList.remove('active');
            });

            const selectedItem = document.querySelector(`#node-${nodeId} .tree-item`);
            if (selectedItem) {
                selectedItem.classList.add('active');
            }

            // Обновление деталей
            updateDetails(nodeId);

            // Обновление хлебных крошек
            updateBreadcrumb(nodeId);

            // Обновление URL в браузере
            updateBrowserUrl(nodeId);

            // Обновляем генератор ссылок если он открыт
            const urlGenerator = document.getElementById('urlGenerator');
            if (urlGenerator.style.display === 'block') {
                updateGeneratedUrl();
            }
        }

        // Обновление URL браузера
        function updateBrowserUrl(nodeId) {
            const node = findNodeById(nodeId);
            if (!node) return;

            // Создаем новый URL
            const url = new URL(window.location);

            // Очищаем старые параметры
            url.searchParams.delete('path');
            url.searchParams.delete('id');

            // Устанавливаем новые параметры
            if (appState.linkFormat === 'path') {
                const sectionPath = node.path.startsWith('/') ? node.path.substring(1) : node.path;
                url.searchParams.set('path', sectionPath);
            } else {
                url.searchParams.set('id', node.id);
            }

            // Обновляем URL без перезагрузки
            window.history.pushState({}, '', url.toString());

            // Обновляем отображение URL
            updateCurrentUrlDisplay();
        }

        // Функция обновления деталей
        function updateDetails(nodeId) {
            const node = findNodeById(nodeId);
            const detailsContent = document.getElementById('detailsContent');
            const noSelection = document.getElementById('noSelection');

            if (!node) return;

            noSelection.style.display = 'none';
            detailsContent.innerHTML = createDetailsHTML(node);
        }

        // Создание HTML для деталей узла
        function createDetailsHTML(node) {
            const subsections = node.children && node.children.length > 0 ?
                node.children.map(child => `
                    <li onclick="selectNode('${child.id}')" style="cursor: pointer;">
                        <i class="${child.icon}" style="color: ${child.color};"></i>
                        <strong>${child.title}</strong> - ${child.description}
                        <span style="color: #95a5a6; font-size: 0.9em; margin-left: auto;">${child.path}</span>
                    </li>
                `).join('') :
                '<li style="font-style: italic; color: #95a5a6;">Нет подразделов</li>';

            return `
                <div class="section-details active">
                    <div class="detail-header">
                        <div class="detail-icon" style="background: ${node.color};">
                            <i class="${node.icon}"></i>
                        </div>
                        <div>
                            <div class="detail-title">${node.title}</div>
                            <div class="detail-path">${node.path}</div>
                        </div>
                    </div>
                    
                    <div class="detail-content">
                        <div class="detail-section">
                            <h3><i class="fas fa-info-circle"></i> Описание</h3>
                            <p>${node.description}</p>
                        </div>
                        
                        <div class="detail-section">
                            <h3><i class="fas fa-file-alt"></i> Содержание</h3>
                            <p>${node.content}</p>
                        </div>
                        
                        <div class="detail-section">
                            <h3><i class="fas fa-folder-open"></i> Подразделы (${node.children ? node.children.length : 0})</h3>
                            <ul class="subsections-list">
                                ${subsections}
                            </ul>
                        </div>
                    </div>
                </div>
            `;
        }

        // Выполнение поиска
        function performSearch(query) {
            const startTime = performance.now();
            appState.searchQuery = query.trim().toLowerCase();

            if (!appState.searchQuery) {
                clearSearch();
                return;
            }

            appState.searchActive = true;
            appState.searchResults = [];

            // Поиск по всем узлам
            searchNodes(hierarchyData, appState.searchQuery);

            // Сортировка результатов по релевантности
            appState.searchResults.sort((a, b) => b.score - a.score);

            // Отображение результатов
            displaySearchResults();

            // Подсветка найденных элементов в дереве
            highlightSearchResults();

            const endTime = performance.now();
            const searchTime = Math.round(endTime - startTime);

            document.getElementById('searchTime').textContent = `${searchTime} мс`;

            // Показываем панель результатов
            document.getElementById('searchResults').style.display = 'block';
        }

        // Рекурсивный поиск по узлам
        function searchNodes(node, query) {
            let score = 0;
            let matches = [];

            // Поиск в заголовке
            if (node.title.toLowerCase().includes(query)) {
                score += 3;
                matches.push({ field: 'title', text: node.title });
            }

            // Поиск в описании
            if (node.description.toLowerCase().includes(query)) {
                score += 2;
                matches.push({ field: 'description', text: node.description });
            }

            // Поиск в содержимом
            if (node.content.toLowerCase().includes(query)) {
                score += 1;
                matches.push({ field: 'content', text: node.content });
            }

            // Поиск в пути
            if (node.path.toLowerCase().includes(query)) {
                score += 1;
                matches.push({ field: 'path', text: node.path });
            }

            // Если есть совпадения, добавляем в результаты
            if (score > 0) {
                appState.searchResults.push({
                    node: node,
                    score: score,
                    matches: matches,
                    highlightedTitle: highlightText(node.title, query),
                    highlightedDescription: highlightText(node.description, query)
                });
            }

            // Рекурсивный поиск в дочерних элементах
            if (node.children) {
                node.children.forEach(child => {
                    searchNodes(child, query);
                });
            }
        }

        // Подсветка текста в результатах поиска
        function highlightText(text, query) {
            if (!query) return text;

            const regex = new RegExp(`(${query})`, 'gi');
            return text.replace(regex, '<span class="search-highlight-text">$1</span>');
        }

        // Отображение результатов поиска
        function displaySearchResults() {
            const resultsList = document.getElementById('resultsList');
            const resultsCount = document.getElementById('resultsCount');

            if (appState.searchResults.length === 0) {
                resultsList.innerHTML = `
                    <div class="no-results">
                        <i class="fas fa-search"></i>
                        <h3>Ничего не найдено</h3>
                        <p>Попробуйте изменить запрос или использовать другие ключевые слова</p>
                    </div>
                `;
                resultsCount.textContent = '0 результатов';
                return;
            }

            let resultsHTML = '';

            appState.searchResults.forEach((result, index) => {
                const isSelected = index === 0;
                resultsHTML += `
                    <div class="search-result-item ${isSelected ? 'highlight' : ''}" 
                         data-node-id="${result.node.id}"
                        onclick="navigateToSearchResult('${result.node.id}')">
                        <div class="icon" style="background: ${result.node.color};">
                            <i class="${result.node.icon}"></i>
                        </div>
                        <div class="info">
                            <div class="title">${result.highlightedTitle}</div>
                            <div class="path">${result.node.path}</div>
                            <div style="font-size: 0.85rem; color: #7f8c8d; margin-top: 5px;">
                                ${result.highlightedDescription}
                            </div>
                        </div>
                        <div class="match-count">${result.score}</div>
                    </div>
                `;
            });

            resultsList.innerHTML = resultsHTML;
            resultsCount.textContent = `${appState.searchResults.length} результат(ов)`;
        }

        // Подсветка найденных элементов в дереве
        function highlightSearchResults() {
            // Сначала снимаем все подсветки
            document.querySelectorAll('.tree-item').forEach(item => {
                item.classList.remove('search-match', 'search-highlight');
            });

            // Подсвечиваем найденные элементы
            appState.searchResults.forEach((result, index) => {
                const nodeElement = document.getElementById(`node-${result.node.id}`);
                if (nodeElement) {
                    const itemDiv = nodeElement.querySelector('.tree-item');
                    if (itemDiv) {
                        itemDiv.classList.add('search-match');

                        // Первый результат подсвечиваем по-особому
                        if (index === 0) {
                            itemDiv.classList.add('search-highlight');
                        }
                    }
                }
            });
        }

        // Навигация к результату поиска
        function navigateToSearchResult(nodeId) {
            const node = findNodeById(nodeId);
            if (!node) return;

            // Раскрываем всех родителей узла
            expandAllParents(node);

            // Выбираем узел
            selectNode(node.id);

            // Прокручиваем к элементу
            const nodeElement = document.getElementById(`node-${node.id}`);
            if (nodeElement) {
                nodeElement.scrollIntoView({ behavior: 'smooth', block: 'center' });

                // Мигающая анимация для привлечения внимания
                const itemDiv = nodeElement.querySelector('.tree-item');
                if (itemDiv) {
                    itemDiv.style.animation = 'none';
                    setTimeout(() => {
                        itemDiv.style.animation = 'pulse 1s 3';
                    }, 10);
                }
            }

            // Скрываем результаты поиска
            document.getElementById('searchResults').style.display = 'none';

            // Очищаем поле поиска
            document.getElementById('searchInput').value = '';
            appState.searchActive = false;
        }

        // Раскрытие всех родителей узла
        function expandAllParents(node) {
            let currentNode = node;

            while (currentNode.parentId) {
                appState.expandedNodes.add(currentNode.parentId);
                currentNode = findNodeById(currentNode.parentId);
            }

            renderTree();
        }

        // Очистка поиска
        function clearSearch() {
            document.getElementById('searchInput').value = '';
            appState.searchQuery = '';
            appState.searchResults = [];
            appState.searchActive = false;

            document.getElementById('searchResults').style.display = 'none';

            // Снимаем подсветку с элементов дерева
            document.querySelectorAll('.tree-item').forEach(item => {
                item.classList.remove('search-match', 'search-highlight');
            });
        }

        // Рендеринг дерева
        function renderTree() {
            const treeContainer = document.getElementById('tree');
            treeContainer.innerHTML = '';
            treeContainer.appendChild(createTreeNode(hierarchyData, 0));
        }

        // Создание узла дерева
        function createTreeNode(node, level) {
            const li = document.createElement('li');
            li.id = `node-${node.id}`;
            li.dataset.nodeId = node.id;

            const itemDiv = document.createElement('div');
            itemDiv.className = 'tree-item';
            if (appState.selectedNode === node.id) {
                itemDiv.classList.add('active');
            }

            if (node.children && node.children.length > 0) {
                itemDiv.classList.add(appState.expandedNodes.has(node.id) ? 'expanded' : 'collapsed');
            }

            // Проверяем, является ли узел результатом поиска
            const searchResult = appState.searchResults.find(r => r.node.id === node.id);
            if (searchResult) {
                itemDiv.classList.add('search-match');
                if (appState.searchResults[0] && appState.searchResults[0].node.id === node.id) {
                    itemDiv.classList.add('search-highlight');
                }
            }

            // Содержимое элемента
            const displayTitle = searchResult ?
                highlightText(node.title, appState.searchQuery) :
                node.title;

            itemDiv.innerHTML = `
                <div>
                    <div class="item-title"><i class="${node.icon}" style="color: ${node.color}; margin-right: 8px;"></i> ${displayTitle}</div>
                    <div class="item-path">${node.path}</div>
                </div>
                ${node.children && node.children.length > 0 ?
                    `<div class="item-icon"><i class="fas fa-chevron-down"></i></div>` :
                    `<div class="item-icon"><i class="fas fa-file"></i></div>`
                }
            `;

            itemDiv.addEventListener('click', function (e) {
                e.stopPropagation();
                selectNode(node.id);
            });

            itemDiv.addEventListener('dblclick', function (e) {
                e.stopPropagation();
                toggleNode(node.id);
            });

            li.appendChild(itemDiv);

            // Дочерние элементы
            if (node.children && node.children.length > 0) {
                const ul = document.createElement('ul');
                ul.style.display = appState.expandedNodes.has(node.id) ? 'block' : 'none';

                node.children.forEach(child => {
                    ul.appendChild(createTreeNode(child, level + 1));
                });

                li.appendChild(ul);
            }

            return li;
        }

        // Поиск узла по ID
        function findNodeById(nodeId) {
            function findNode(node, id) {
                if (node.id === id) return node;

                if (node.children) {
                    for (const child of node.children) {
                        child.parentId = node.id;
                        const found = findNode(child, id);
                        if (found) return found;
                    }
                }

                return null;
            }

            return findNode(hierarchyData, nodeId);
        }

        // Переключение узла (раскрыть/свернуть)
        function toggleNode(nodeId) {
            if (appState.expandedNodes.has(nodeId)) {
                appState.expandedNodes.delete(nodeId);
            } else {
                appState.expandedNodes.add(nodeId);
            }

            const nodeElement = document.getElementById(`node-${nodeId}`);
            if (nodeElement) {
                const itemDiv = nodeElement.querySelector('.tree-item');
                const childUl = nodeElement.querySelector('ul');

                if (itemDiv) {
                    itemDiv.classList.toggle('expanded');
                    itemDiv.classList.toggle('collapsed');
                }

                if (childUl) {
                    childUl.style.display = appState.expandedNodes.has(nodeId) ? 'block' : 'none';
                }
            }
        }

        // Раскрыть все узлы
        function expandAll() {
            const nodesWithChildren = [];
            function collectNodes(node) {
                if (node.children && node.children.length > 0) {
                    nodesWithChildren.push(node.id);
                    node.children.forEach(collectNodes);
                }
            }
            collectNodes(hierarchyData);

            nodesWithChildren.forEach(id => appState.expandedNodes.add(id));
            renderTree();
        }

        // Свернуть все узлы
        function collapseAll() {
            appState.expandedNodes.clear();
            appState.expandedNodes.add('root');
            renderTree();
        }

        // Сброс вида
        function resetView() {
            collapseAll();
            clearSearch();
            selectNode('root');
        }

        // Обновление счетчика разделов
        function updateTotalSections() {
            function countNodes(node) {
                let count = 1;
                if (node.children) {
                    node.children.forEach(child => {
                        count += countNodes(child);
                    });
                }
                return count;
            }

            const total = countNodes(hierarchyData);
            document.getElementById('totalSections').textContent = total;
        }

        // Обновление хлебных крошек
        function updateBreadcrumb(nodeId) {
            const breadcrumb = document.getElementById('breadcrumb');
            const path = getNodePath(nodeId);

            let breadcrumbHTML = '';
            path.forEach((node, index) => {
                if (index > 0) {
                    breadcrumbHTML += `<i class="fas fa-chevron-right"></i>`;
                }

                if (index === path.length - 1) {
                    breadcrumbHTML += `<span>${node.title}</span>`;
                } else {
                    breadcrumbHTML += `<a href="#" data-path="${node.path}" data-node-id="${node.id}">${node.title}</a>`;
                }
            });

            breadcrumb.innerHTML = breadcrumbHTML;

            breadcrumb.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', function (e) {
                    e.preventDefault();
                    const nodeId = this.dataset.nodeId;
                    selectNode(nodeId);
                    expandAllParents(findNodeById(nodeId));
                });
            });
        }

        // Получение пути к узлу
        function getNodePath(nodeId) {
            const path = [];
            let currentNode = findNodeById(nodeId);

            while (currentNode) {
                path.unshift(currentNode);
                currentNode = currentNode.parentId ? findNodeById(currentNode.parentId) : null;
            }

            return path;
        }
    </script>
</body>

</html>